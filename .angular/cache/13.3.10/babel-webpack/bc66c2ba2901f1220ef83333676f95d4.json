{"ast":null,"code":"/**\r\n * DevExtreme (esm/core/utils/resize_callbacks.js)\r\n * Version: 21.2.6\r\n * Build date: Tue Mar 01 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { hasWindow, getWindow } from \"./window\";\nimport domAdapter from \"../dom_adapter\";\nimport Callbacks from \"./callbacks\";\nimport readyCallbacks from \"./ready_callbacks\";\nimport callOnce from \"./call_once\";\n\nvar resizeCallbacks = function () {\n  var prevSize;\n  var callbacks = Callbacks();\n  var originalCallbacksAdd = callbacks.add;\n  var originalCallbacksRemove = callbacks.remove;\n\n  if (!hasWindow()) {\n    return callbacks;\n  }\n\n  var formatSize = function formatSize() {\n    var window = getWindow();\n    return {\n      width: window.innerWidth,\n      height: window.innerHeight\n    };\n  };\n\n  var handleResize = function handleResize() {\n    var now = formatSize();\n\n    if (now.width === prevSize.width && now.height === prevSize.height) {\n      return;\n    }\n\n    var changedDimension;\n\n    if (now.width === prevSize.width) {\n      changedDimension = \"height\";\n    }\n\n    if (now.height === prevSize.height) {\n      changedDimension = \"width\";\n    }\n\n    prevSize = now;\n    callbacks.fire(changedDimension);\n  };\n\n  var setPrevSize = callOnce(function () {\n    prevSize = formatSize();\n  });\n  var removeListener;\n\n  callbacks.add = function () {\n    var result = originalCallbacksAdd.apply(callbacks, arguments);\n    setPrevSize();\n    readyCallbacks.add(function () {\n      if (!removeListener && callbacks.has()) {\n        removeListener = domAdapter.listen(getWindow(), \"resize\", handleResize);\n      }\n    });\n    return result;\n  };\n\n  callbacks.remove = function () {\n    var result = originalCallbacksRemove.apply(callbacks, arguments);\n\n    if (!callbacks.has() && removeListener) {\n      removeListener();\n      removeListener = void 0;\n    }\n\n    return result;\n  };\n\n  return callbacks;\n}();\n\nexport default resizeCallbacks;","map":null,"metadata":{},"sourceType":"module"}