{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/grid_core/ui.grid_core.columns_resizing_reordering.js)\r\n * Version: 21.2.6\r\n * Build date: Tue Mar 01 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { setHeight as _setHeight, getHeight, setWidth, getWidth } from \"../../core/utils/size\";\nimport $ from \"../../core/renderer\";\nimport domAdapter from \"../../core/dom_adapter\";\nimport eventsEngine from \"../../events/core/events_engine\";\nimport Callbacks from \"../../core/utils/callbacks\";\nimport { isDefined, isString, isObject } from \"../../core/utils/type\";\nimport { each } from \"../../core/utils/iterator\";\nimport { extend } from \"../../core/utils/extend\";\nimport { getBoundingRect } from \"../../core/utils/position\";\nimport { addNamespace, eventData as getEventData, isTouchEvent } from \"../../events/utils/index\";\nimport pointerEvents from \"../../events/pointer\";\nimport { start as dragEventStart, move as dragEventMove, end as dragEventEnd } from \"../../events/drag\";\nimport modules from \"./ui.grid_core.modules\";\nimport gridCoreUtils from \"./ui.grid_core.utils\";\nimport fx from \"../../animation/fx\";\nimport swatchContainer from \"../widget/swatch_container\";\nvar COLUMNS_SEPARATOR_CLASS = \"columns-separator\";\nvar COLUMNS_SEPARATOR_TRANSPARENT = \"columns-separator-transparent\";\nvar DRAGGING_HEADER_CLASS = \"drag-header\";\nvar CELL_CONTENT_CLASS = \"text-content\";\nvar HEADERS_DRAG_ACTION_CLASS = \"drag-action\";\nvar TRACKER_CLASS = \"tracker\";\nvar HEADERS_DROP_HIGHLIGHT_CLASS = \"drop-highlight\";\nvar BLOCK_SEPARATOR_CLASS = \"dx-block-separator\";\nvar HEADER_ROW_CLASS = \"dx-header-row\";\nvar WIDGET_CLASS = \"dx-widget\";\nvar DRAGGING_COMMAND_CELL_CLASS = \"dx-drag-command-cell\";\nvar MODULE_NAMESPACE = \"dxDataGridResizingReordering\";\nvar COLUMNS_SEPARATOR_TOUCH_TRACKER_WIDTH = 10;\nvar DRAGGING_DELTA = 5;\nvar COLUMN_OPACITY = .5;\n\nvar allowResizing = function allowResizing(that) {\n  return that.option(\"allowColumnResizing\") || that.getController(\"columns\").isColumnOptionUsed(\"allowResizing\");\n};\n\nvar allowReordering = function allowReordering(that) {\n  return that.option(\"allowColumnReordering\") || that.getController(\"columns\").isColumnOptionUsed(\"allowReordering\");\n};\n\nvar TrackerView = modules.View.inherit({\n  _renderCore: function _renderCore() {\n    this.callBase();\n    this.element().addClass(this.addWidgetPrefix(TRACKER_CLASS));\n    this.hide();\n  },\n  _unsubscribeFromCallback: function _unsubscribeFromCallback() {\n    if (this._positionChanged) {\n      this._tablePositionController.positionChanged.remove(this._positionChanged);\n    }\n  },\n  _subscribeToCallback: function _subscribeToCallback() {\n    var that = this;\n\n    that._positionChanged = function (position) {\n      var $element = that.element();\n\n      if ($element && $element.hasClass(that.addWidgetPrefix(TRACKER_CLASS))) {\n        $element.css({\n          top: position.top\n        });\n\n        _setHeight($element, position.height);\n      }\n    };\n\n    this._tablePositionController.positionChanged.add(that._positionChanged);\n  },\n  optionChanged: function optionChanged(args) {\n    if (\"allowColumnResizing\" === args.name) {\n      this._unsubscribeFromCallback();\n\n      if (args.value) {\n        this._subscribeToCallback();\n\n        this._invalidate();\n      }\n    }\n\n    this.callBase(args);\n  },\n  init: function init() {\n    this.callBase();\n    this._tablePositionController = this.getController(\"tablePosition\");\n\n    this._subscribeToCallback();\n  },\n  isVisible: function isVisible() {\n    return allowResizing(this);\n  },\n  show: function show() {\n    this.element().show();\n  },\n  hide: function hide() {\n    this.element() && this.element().hide();\n  },\n  setHeight: function setHeight(value) {\n    _setHeight(this.element(), value);\n  },\n  dispose: function dispose() {\n    this._unsubscribeFromCallback();\n\n    this.callBase();\n  }\n});\nvar SeparatorView = modules.View.inherit({\n  _renderSeparator: function _renderSeparator() {},\n  _renderCore: function _renderCore(options) {\n    this.callBase(options);\n    this._isShown = true;\n\n    this._renderSeparator();\n\n    this.hide();\n  },\n  show: function show() {\n    this._isShown = true;\n  },\n  hide: function hide() {\n    this._isShown = false;\n  },\n  height: function height(value) {\n    var $element = this.element();\n\n    if ($element) {\n      if (isDefined(value)) {\n        _setHeight($element, value);\n      } else {\n        return getHeight($element);\n      }\n    }\n  },\n  width: function width(value) {\n    var $element = this.element();\n\n    if ($element) {\n      if (isDefined(value)) {\n        setWidth($element, value);\n      } else {\n        return getWidth($element);\n      }\n    }\n  }\n});\nvar ColumnsSeparatorView = SeparatorView.inherit({\n  _renderSeparator: function _renderSeparator() {\n    this.callBase();\n    var $element = this.element();\n    $element.addClass(this.addWidgetPrefix(COLUMNS_SEPARATOR_CLASS));\n  },\n  _subscribeToCallback: function _subscribeToCallback() {\n    var that = this;\n    var $element;\n\n    that._positionChanged = function (position) {\n      $element = that.element();\n\n      if ($element) {\n        $element.css({\n          top: position.top\n        });\n\n        _setHeight($element, position.height);\n      }\n    };\n\n    that._tablePositionController.positionChanged.add(that._positionChanged);\n  },\n  _unsubscribeFromCallback: function _unsubscribeFromCallback() {\n    this._positionChanged && this._tablePositionController.positionChanged.remove(this._positionChanged);\n  },\n  _init: function _init() {\n    this._isTransparent = allowResizing(this);\n\n    if (this.isVisible()) {\n      this._subscribeToCallback();\n    }\n  },\n  isVisible: function isVisible() {\n    return this.option(\"showColumnHeaders\") && (allowReordering(this) || allowResizing(this));\n  },\n  optionChanged: function optionChanged(args) {\n    if (\"allowColumnResizing\" === args.name) {\n      if (args.value) {\n        this._init();\n\n        this._invalidate();\n\n        this.hide(true);\n      } else {\n        this._unsubscribeFromCallback();\n\n        this._isTransparent = allowResizing(this);\n        this.hide(true);\n      }\n    }\n\n    this.callBase(args);\n  },\n  init: function init() {\n    this.callBase();\n    this._tablePositionController = this.getController(\"tablePosition\");\n\n    this._init();\n  },\n  show: function show() {\n    var $element = this.element();\n\n    if ($element && !this._isShown) {\n      if (this._isTransparent) {\n        $element.removeClass(this.addWidgetPrefix(COLUMNS_SEPARATOR_TRANSPARENT));\n      } else {\n        $element.show();\n      }\n    }\n\n    this.callBase();\n  },\n  hide: function hide(force) {\n    var $element = this.element();\n    var columnsSeparatorTransparent = this.addWidgetPrefix(COLUMNS_SEPARATOR_TRANSPARENT);\n\n    if ($element && (this._isShown || force)) {\n      if (this._isTransparent) {\n        $element.addClass(columnsSeparatorTransparent);\n        $element.css(\"left\", \"\");\n        $element.show();\n      } else {\n        if ($element.hasClass(columnsSeparatorTransparent)) {\n          $element.removeClass(columnsSeparatorTransparent);\n        }\n\n        $element.hide();\n      }\n    }\n\n    this.callBase();\n  },\n  moveByX: function moveByX(outerX) {\n    var $element = this.element();\n\n    if ($element) {\n      $element.css(\"left\", null === outerX ? 0 : outerX - this._parentElement().offset().left);\n    }\n  },\n  changeCursor: function changeCursor(cursorName) {\n    cursorName = isDefined(cursorName) ? cursorName : \"\";\n    var $element = this.element();\n\n    if ($element) {\n      $element.css(\"cursor\", cursorName);\n    }\n  },\n  dispose: function dispose() {\n    this._unsubscribeFromCallback();\n\n    this.callBase();\n  }\n});\nvar BlockSeparatorView = SeparatorView.inherit({\n  init: function init() {\n    var that = this;\n    this.callBase();\n    this.getController(\"data\").loadingChanged.add(function (isLoading) {\n      if (!isLoading) {\n        that.hide();\n      }\n    });\n  },\n  _renderSeparator: function _renderSeparator() {\n    this.callBase();\n    this.element().addClass(BLOCK_SEPARATOR_CLASS).html(\"&nbsp;\");\n  },\n  hide: function hide() {\n    var $parent = this._parentElement();\n\n    var $element = this.element();\n\n    if ($element && this._isShown) {\n      $element.css(\"display\", \"none\");\n    }\n\n    if ($parent && !$parent.children(\".\" + BLOCK_SEPARATOR_CLASS).length) {\n      $parent.prepend(this.element());\n    }\n\n    this.callBase();\n  },\n  isVisible: function isVisible() {\n    var groupPanelOptions = this.option(\"groupPanel\");\n    var columnChooserOptions = this.option(\"columnChooser\");\n    return groupPanelOptions && groupPanelOptions.visible || columnChooserOptions && columnChooserOptions.enabled;\n  },\n  show: function show(targetLocation) {\n    var $element = this.element();\n\n    var startAnimate = function startAnimate(toOptions) {\n      fx.stop($element, true);\n      fx.animate($element, {\n        type: \"slide\",\n        from: {\n          width: 0,\n          display: toOptions.display\n        },\n        to: toOptions,\n        duration: 300,\n        easing: \"swing\"\n      });\n    };\n\n    if ($element && !this._isShown) {\n      switch (targetLocation) {\n        case \"group\":\n          startAnimate({\n            width: \"50px\",\n            display: \"inline-block\"\n          });\n          break;\n\n        case \"columnChooser\":\n          startAnimate({\n            width: \"100%\",\n            display: \"block\"\n          });\n          break;\n\n        default:\n          $element.css(\"display\", \"\");\n      }\n    }\n\n    this.callBase();\n  }\n});\nvar DraggingHeaderView = modules.View.inherit({\n  _isDragging: false,\n  isDragging: function isDragging() {\n    return this._isDragging;\n  },\n  _getDraggingPanelByPos: function _getDraggingPanelByPos(pos) {\n    var result;\n    each(this._dragOptions.draggingPanels, function (index, draggingPanel) {\n      if (draggingPanel) {\n        var boundingRect = draggingPanel.getBoundingRect();\n\n        if (boundingRect && (void 0 === boundingRect.bottom || pos.y < boundingRect.bottom) && (void 0 === boundingRect.top || pos.y > boundingRect.top) && (void 0 === boundingRect.left || pos.x > boundingRect.left) && (void 0 === boundingRect.right || pos.x < boundingRect.right)) {\n          result = draggingPanel;\n          return false;\n        }\n      }\n    });\n    return result;\n  },\n  _renderCore: function _renderCore() {\n    this.element().addClass(this.addWidgetPrefix(DRAGGING_HEADER_CLASS) + \" \" + this.addWidgetPrefix(CELL_CONTENT_CLASS) + \" \" + WIDGET_CLASS).hide();\n  },\n  _resetTargetColumnOptions: function _resetTargetColumnOptions() {\n    var params = this._dropOptions;\n    params.targetColumnIndex = -1;\n    delete params.targetColumnElement;\n    delete params.isLast;\n    delete params.posX;\n    delete params.posY;\n  },\n  _getVisibleIndexObject: function _getVisibleIndexObject(rowIndex, visibleIndex) {\n    if (isDefined(rowIndex)) {\n      return {\n        columnIndex: visibleIndex,\n        rowIndex: rowIndex\n      };\n    }\n\n    return visibleIndex;\n  },\n  dispose: function dispose() {\n    var element = this.element();\n    this._dragOptions = null;\n    element && element.parent().find(\".\" + this.addWidgetPrefix(DRAGGING_HEADER_CLASS)).remove();\n  },\n  isVisible: function isVisible() {\n    var columnsController = this.getController(\"columns\");\n    var commonColumnSettings = columnsController.getCommonSettings();\n    return this.option(\"showColumnHeaders\") && (allowReordering(this) || commonColumnSettings.allowGrouping || commonColumnSettings.allowHiding);\n  },\n  init: function init() {\n    var that = this;\n    this.callBase();\n    this._controller = this.getController(\"draggingHeader\");\n    this._columnsResizerViewController = this.getController(\"columnsResizer\");\n    this.getController(\"data\").loadingChanged.add(function (isLoading) {\n      var element = that.element();\n\n      if (!isLoading && element) {\n        element.hide();\n      }\n    });\n  },\n  dragHeader: function dragHeader(options) {\n    var columnElement = options.columnElement;\n    var isCommandColumn = !!options.sourceColumn.type;\n    this._isDragging = true;\n    this._dragOptions = options;\n    this._dropOptions = {\n      sourceIndex: options.index,\n      sourceColumnIndex: this._getVisibleIndexObject(options.rowIndex, options.columnIndex),\n      sourceColumnElement: options.columnElement,\n      sourceLocation: options.sourceLocation\n    };\n    var document = domAdapter.getDocument();\n    this._onSelectStart = document.onselectstart;\n\n    document.onselectstart = function () {\n      return false;\n    };\n\n    this._controller.drag(this._dropOptions);\n\n    this.element().css({\n      textAlign: columnElement && columnElement.css(\"textAlign\"),\n      height: columnElement && (isCommandColumn && columnElement.get(0).clientHeight || getHeight(columnElement)),\n      width: columnElement && (isCommandColumn && columnElement.get(0).clientWidth || getWidth(columnElement)),\n      whiteSpace: columnElement && columnElement.css(\"whiteSpace\")\n    }).addClass(this.addWidgetPrefix(HEADERS_DRAG_ACTION_CLASS)).toggleClass(DRAGGING_COMMAND_CELL_CLASS, isCommandColumn).text(isCommandColumn ? \"\" : options.sourceColumn.caption);\n    this.element().appendTo(swatchContainer.getSwatchContainer(columnElement));\n  },\n  moveHeader: function moveHeader(args) {\n    var e = args.event;\n    var that = e.data.that;\n    var eventData = getEventData(e);\n    var isResizing = that._columnsResizerViewController ? that._columnsResizerViewController.isResizing() : false;\n    var dragOptions = that._dragOptions;\n\n    if (that._isDragging && !isResizing) {\n      var $element = that.element();\n      var moveDeltaX = Math.abs(eventData.x - dragOptions.columnElement.offset().left - dragOptions.deltaX);\n      var moveDeltaY = Math.abs(eventData.y - dragOptions.columnElement.offset().top - dragOptions.deltaY);\n\n      if ($element.is(\":visible\") || moveDeltaX > DRAGGING_DELTA || moveDeltaY > DRAGGING_DELTA) {\n        $element.show();\n        var newLeft = eventData.x - dragOptions.deltaX;\n        var newTop = eventData.y - dragOptions.deltaY;\n        $element.css({\n          left: newLeft,\n          top: newTop\n        });\n        that.dockHeader(eventData);\n      }\n\n      e.preventDefault();\n    }\n  },\n  dockHeader: function dockHeader(eventData) {\n    var targetDraggingPanel = this._getDraggingPanelByPos(eventData);\n\n    var controller = this._controller;\n    var params = this._dropOptions;\n    var dragOptions = this._dragOptions;\n\n    if (targetDraggingPanel) {\n      var rtlEnabled = this.option(\"rtlEnabled\");\n      var isVerticalOrientation = \"columnChooser\" === targetDraggingPanel.getName();\n      var axisName = isVerticalOrientation ? \"y\" : \"x\";\n      var targetLocation = targetDraggingPanel.getName();\n      var rowIndex = \"headers\" === targetLocation ? dragOptions.rowIndex : void 0;\n      var sourceColumn = dragOptions.sourceColumn;\n      var columnElements = targetDraggingPanel.getColumnElements(rowIndex, null === sourceColumn || void 0 === sourceColumn ? void 0 : sourceColumn.ownerBand) || [];\n      var pointsByTarget = dragOptions.pointsByTarget = dragOptions.pointsByTarget || {};\n      var pointsByColumns = \"columnChooser\" === targetLocation ? [] : pointsByTarget[targetLocation] || controller._generatePointsByColumns(extend({}, dragOptions, {\n        targetDraggingPanel: targetDraggingPanel,\n        columns: targetDraggingPanel.getColumns(rowIndex),\n        columnElements: columnElements,\n        isVerticalOrientation: isVerticalOrientation,\n        startColumnIndex: \"headers\" === targetLocation && $(columnElements[0]).index()\n      }));\n      pointsByTarget[targetLocation] = pointsByColumns;\n      params.targetLocation = targetLocation;\n\n      if (pointsByColumns.length > 0) {\n        for (var i = 0; i < pointsByColumns.length; i++) {\n          var centerPosition = pointsByColumns[i + 1] && (pointsByColumns[i][axisName] + pointsByColumns[i + 1][axisName]) / 2;\n\n          if (void 0 === centerPosition || (rtlEnabled && \"x\" === axisName ? eventData[axisName] > centerPosition : eventData[axisName] < centerPosition)) {\n            params.targetColumnIndex = this._getVisibleIndexObject(rowIndex, pointsByColumns[i].columnIndex);\n\n            if (columnElements[i]) {\n              params.targetColumnElement = columnElements.eq(i);\n              params.isLast = false;\n            } else {\n              params.targetColumnElement = columnElements.last();\n              params.isLast = true;\n            }\n\n            params.posX = pointsByColumns[i].x;\n            params.posY = pointsByColumns[i].y;\n            controller.dock(params);\n            break;\n          }\n        }\n      } else {\n        this._resetTargetColumnOptions();\n\n        controller.dock(params);\n      }\n    }\n  },\n  dropHeader: function dropHeader(args) {\n    var e = args.event;\n    var that = e.data.that;\n    var controller = that._controller;\n    that.element().hide();\n\n    if (controller && that._isDragging) {\n      controller.drop(that._dropOptions);\n    }\n\n    that.element().appendTo(that._parentElement());\n    that._dragOptions = null;\n    that._dropOptions = null;\n    that._isDragging = false;\n    domAdapter.getDocument().onselectstart = that._onSelectStart || null;\n  }\n});\n\nvar isNextColumnResizingMode = function isNextColumnResizingMode(that) {\n  return \"widget\" !== that.option(\"columnResizingMode\");\n};\n\nvar ColumnsResizerViewController = modules.ViewController.inherit({\n  _isHeadersRowArea: function _isHeadersRowArea(posY) {\n    if (this._columnHeadersView) {\n      var element = this._columnHeadersView.element();\n\n      if (element) {\n        var offsetTop = element.offset().top;\n\n        var headersRowHeight = this._columnHeadersView.getHeadersRowHeight();\n\n        return posY >= offsetTop && posY <= offsetTop + headersRowHeight;\n      }\n    }\n\n    return false;\n  },\n  _isRtlParentStyle: function _isRtlParentStyle() {\n    var _this$_$parentContain;\n\n    return this.option(\"rtlEnabled\") && \"rtl\" === (null === (_this$_$parentContain = this._$parentContainer) || void 0 === _this$_$parentContain ? void 0 : _this$_$parentContain.parent().css(\"direction\"));\n  },\n  _pointCreated: function _pointCreated(point, cellsLength, columns) {\n    var isNextColumnMode = isNextColumnResizingMode(this);\n    var rtlEnabled = this.option(\"rtlEnabled\");\n\n    var isRtlParentStyle = this._isRtlParentStyle();\n\n    var firstPointColumnIndex = !isNextColumnMode && rtlEnabled && !isRtlParentStyle ? 0 : 1;\n\n    if (point.index >= firstPointColumnIndex && point.index < cellsLength + (!isNextColumnMode && (!rtlEnabled || isRtlParentStyle) ? 1 : 0)) {\n      point.columnIndex -= firstPointColumnIndex;\n      var currentColumn = columns[point.columnIndex] || {};\n      var nextColumn = columns[point.columnIndex + 1] || {};\n      return !(isNextColumnMode ? currentColumn.allowResizing && nextColumn.allowResizing : currentColumn.allowResizing);\n    }\n\n    return true;\n  },\n  _getTargetPoint: function _getTargetPoint(pointsByColumns, currentX, deltaX) {\n    if (pointsByColumns) {\n      for (var i = 0; i < pointsByColumns.length; i++) {\n        if (pointsByColumns[i].x === pointsByColumns[0].x && pointsByColumns[i + 1] && pointsByColumns[i].x === pointsByColumns[i + 1].x) {\n          continue;\n        }\n\n        if (pointsByColumns[i].x - deltaX <= currentX && currentX <= pointsByColumns[i].x + deltaX) {\n          return pointsByColumns[i];\n        }\n      }\n    }\n\n    return null;\n  },\n  _moveSeparator: function _moveSeparator(args) {\n    var _that$_draggingHeader;\n\n    var e = args.event;\n    var that = e.data;\n\n    var columnsSeparatorWidth = that._columnsSeparatorView.width();\n\n    var isNextColumnMode = isNextColumnResizingMode(that);\n    var deltaX = columnsSeparatorWidth / 2;\n\n    var parentOffset = that._$parentContainer.offset();\n\n    var parentOffsetLeft = parentOffset.left;\n    var eventData = getEventData(e);\n    var rtlEnabled = that.option(\"rtlEnabled\");\n\n    var isRtlParentStyle = this._isRtlParentStyle();\n\n    var isDragging = null === (_that$_draggingHeader = that._draggingHeaderView) || void 0 === _that$_draggingHeader ? void 0 : _that$_draggingHeader.isDragging();\n\n    if (that._isResizing && that._resizingInfo) {\n      if ((parentOffsetLeft <= eventData.x || !isNextColumnMode && isRtlParentStyle) && (!isNextColumnMode || eventData.x <= parentOffsetLeft + getWidth(that._$parentContainer))) {\n        if (that._updateColumnsWidthIfNeeded(eventData.x)) {\n          var $cell = that._columnHeadersView.getColumnElements().eq(that._resizingInfo.currentColumnIndex);\n\n          var cell = $cell[0];\n\n          if (cell) {\n            var outerWidth = cell.getBoundingClientRect().width;\n\n            that._columnsSeparatorView.moveByX($cell.offset().left + ((isNextColumnMode || isRtlParentStyle) && rtlEnabled ? 0 : outerWidth));\n\n            that._tablePositionController.update(that._targetPoint.y);\n\n            e.preventDefault();\n          }\n        }\n      }\n    } else if (!isDragging) {\n      if (that._isHeadersRowArea(eventData.y)) {\n        if (that._previousParentOffset) {\n          if (that._previousParentOffset.left !== parentOffset.left || that._previousParentOffset.top !== parentOffset.top) {\n            that.pointsByColumns(null);\n          }\n        }\n\n        that._targetPoint = that._getTargetPoint(that.pointsByColumns(), eventData.x, columnsSeparatorWidth);\n        that._previousParentOffset = parentOffset;\n        that._isReadyResizing = false;\n\n        if (that._targetPoint) {\n          that._columnsSeparatorView.changeCursor(\"col-resize\");\n\n          that._columnsSeparatorView.moveByX(that._targetPoint.x - deltaX);\n\n          that._tablePositionController.update(that._targetPoint.y);\n\n          that._isReadyResizing = true;\n          e.preventDefault();\n        } else {\n          that._columnsSeparatorView.changeCursor();\n\n          that._columnsSeparatorView.moveByX(null);\n        }\n      } else {\n        that.pointsByColumns(null);\n        that._isReadyResizing = false;\n\n        that._columnsSeparatorView.changeCursor();\n\n        that._columnsSeparatorView.moveByX(null);\n      }\n    }\n  },\n  _endResizing: function _endResizing(args) {\n    var e = args.event;\n    var that = e.data;\n\n    if (that._isResizing) {\n      that.pointsByColumns(null);\n      that._resizingInfo = null;\n\n      that._columnsSeparatorView.hide();\n\n      that._columnsSeparatorView.changeCursor();\n\n      that._trackerView.hide();\n\n      that._isReadyResizing = false;\n      that._isResizing = false;\n    }\n  },\n  _getNextColumnIndex: function _getNextColumnIndex(currentColumnIndex) {\n    return currentColumnIndex + 1;\n  },\n  _setupResizingInfo: function _setupResizingInfo(posX) {\n    var currentColumnIndex = this._targetPoint.columnIndex;\n\n    var nextColumnIndex = this._getNextColumnIndex(currentColumnIndex);\n\n    var currentHeader = this._columnHeadersView.getHeaderElement(currentColumnIndex);\n\n    var nextHeader = this._columnHeadersView.getHeaderElement(nextColumnIndex);\n\n    this._resizingInfo = {\n      startPosX: posX,\n      currentColumnIndex: currentColumnIndex,\n      currentColumnWidth: currentHeader && currentHeader.length > 0 ? getBoundingRect(currentHeader[0]).width : 0,\n      nextColumnIndex: nextColumnIndex,\n      nextColumnWidth: nextHeader && nextHeader.length > 0 ? getBoundingRect(nextHeader[0]).width : 0\n    };\n  },\n  _startResizing: function _startResizing(args) {\n    var e = args.event;\n    var that = e.data;\n    var eventData = getEventData(e);\n\n    if (isTouchEvent(e)) {\n      if (that._isHeadersRowArea(eventData.y)) {\n        that._targetPoint = that._getTargetPoint(that.pointsByColumns(), eventData.x, COLUMNS_SEPARATOR_TOUCH_TRACKER_WIDTH);\n\n        if (that._targetPoint) {\n          that._columnsSeparatorView.moveByX(that._targetPoint.x - that._columnsSeparatorView.width() / 2);\n\n          that._isReadyResizing = true;\n        }\n      } else {\n        that._isReadyResizing = false;\n      }\n    }\n\n    if (that._isReadyResizing) {\n      that._setupResizingInfo(eventData.x);\n\n      that._isResizing = true;\n\n      that._tablePositionController.update(that._targetPoint.y);\n\n      that._columnsSeparatorView.show();\n\n      that._trackerView.show();\n\n      var scrollable = that.component.getScrollable();\n\n      if (scrollable && that._isRtlParentStyle()) {\n        that._scrollRight = getWidth(scrollable.$content()) - getWidth(scrollable.container()) - scrollable.scrollLeft();\n      }\n\n      e.preventDefault();\n      e.stopPropagation();\n    }\n\n    if (this.isResizing()) {\n      this.getController(\"editorFactory\").loseFocus();\n    }\n  },\n  _generatePointsByColumns: function _generatePointsByColumns() {\n    var that = this;\n    var columns = that._columnsController ? that._columnsController.getVisibleColumns() : [];\n\n    var cells = that._columnHeadersView.getColumnElements();\n\n    var pointsByColumns = [];\n\n    if (cells && cells.length > 0) {\n      pointsByColumns = gridCoreUtils.getPointsByColumns(cells, function (point) {\n        return that._pointCreated(point, cells.length, columns);\n      });\n    }\n\n    that._pointsByColumns = pointsByColumns;\n  },\n  _unsubscribeFromEvents: function _unsubscribeFromEvents() {\n    this._moveSeparatorHandler && eventsEngine.off(domAdapter.getDocument(), addNamespace(pointerEvents.move, MODULE_NAMESPACE), this._moveSeparatorHandler);\n    this._startResizingHandler && eventsEngine.off(this._$parentContainer, addNamespace(pointerEvents.down, MODULE_NAMESPACE), this._startResizingHandler);\n\n    if (this._endResizingHandler) {\n      eventsEngine.off(this._columnsSeparatorView.element(), addNamespace(pointerEvents.up, MODULE_NAMESPACE), this._endResizingHandler);\n      eventsEngine.off(domAdapter.getDocument(), addNamespace(pointerEvents.up, MODULE_NAMESPACE), this._endResizingHandler);\n    }\n  },\n  _subscribeToEvents: function _subscribeToEvents() {\n    this._moveSeparatorHandler = this.createAction(this._moveSeparator);\n    this._startResizingHandler = this.createAction(this._startResizing);\n    this._endResizingHandler = this.createAction(this._endResizing);\n    eventsEngine.on(domAdapter.getDocument(), addNamespace(pointerEvents.move, MODULE_NAMESPACE), this, this._moveSeparatorHandler);\n    eventsEngine.on(this._$parentContainer, addNamespace(pointerEvents.down, MODULE_NAMESPACE), this, this._startResizingHandler);\n    eventsEngine.on(this._columnsSeparatorView.element(), addNamespace(pointerEvents.up, MODULE_NAMESPACE), this, this._endResizingHandler);\n    eventsEngine.on(domAdapter.getDocument(), addNamespace(pointerEvents.up, MODULE_NAMESPACE), this, this._endResizingHandler);\n  },\n  _updateColumnsWidthIfNeeded: function _updateColumnsWidthIfNeeded(posX) {\n    var deltaX;\n    var needUpdate = false;\n    var nextCellWidth;\n    var resizingInfo = this._resizingInfo;\n    var columnsController = this._columnsController;\n    var visibleColumns = columnsController.getVisibleColumns();\n\n    var columnsSeparatorWidth = this._columnsSeparatorView.width();\n\n    var contentWidth = this._rowsView.contentWidth();\n\n    var isNextColumnMode = isNextColumnResizingMode(this);\n    var adaptColumnWidthByRatio = isNextColumnMode && this.option(\"adaptColumnWidthByRatio\") && !this.option(\"columnAutoWidth\");\n    var minWidth;\n    var nextColumn;\n    var cellWidth;\n    var rtlEnabled = this.option(\"rtlEnabled\");\n\n    var isRtlParentStyle = this._isRtlParentStyle();\n\n    function isPercentWidth(width) {\n      return isString(width) && \"%\" === width.slice(-1);\n    }\n\n    function setColumnWidth(column, columnWidth, contentWidth, adaptColumnWidthByRatio) {\n      if (column) {\n        var oldColumnWidth = column.width;\n\n        if (oldColumnWidth) {\n          adaptColumnWidthByRatio = isPercentWidth(oldColumnWidth);\n        }\n\n        if (adaptColumnWidthByRatio) {\n          columnsController.columnOption(column.index, \"visibleWidth\", columnWidth);\n          columnsController.columnOption(column.index, \"width\", (columnWidth / contentWidth * 100).toFixed(3) + \"%\");\n        } else {\n          columnsController.columnOption(column.index, \"visibleWidth\", null);\n          columnsController.columnOption(column.index, \"width\", columnWidth);\n        }\n      }\n    }\n\n    deltaX = posX - resizingInfo.startPosX;\n\n    if ((isNextColumnMode || isRtlParentStyle) && rtlEnabled) {\n      deltaX = -deltaX;\n    }\n\n    cellWidth = resizingInfo.currentColumnWidth + deltaX;\n    var column = visibleColumns[resizingInfo.currentColumnIndex];\n    minWidth = column && column.minWidth || columnsSeparatorWidth;\n    needUpdate = cellWidth >= minWidth;\n\n    if (isNextColumnMode) {\n      nextCellWidth = resizingInfo.nextColumnWidth - deltaX;\n      nextColumn = visibleColumns[resizingInfo.nextColumnIndex];\n      minWidth = nextColumn && nextColumn.minWidth || columnsSeparatorWidth;\n      needUpdate = needUpdate && nextCellWidth >= minWidth;\n    }\n\n    if (needUpdate) {\n      columnsController.beginUpdate();\n      cellWidth = Math.floor(cellWidth);\n\n      contentWidth = function (contentWidth, visibleColumns) {\n        var allColumnsHaveWidth = visibleColumns.every(function (column) {\n          return column.width;\n        });\n\n        if (allColumnsHaveWidth) {\n          var totalPercent = visibleColumns.reduce(function (sum, column) {\n            if (isPercentWidth(column.width)) {\n              sum += parseFloat(column.width);\n            }\n\n            return sum;\n          }, 0);\n\n          if (totalPercent > 100) {\n            contentWidth = contentWidth / totalPercent * 100;\n          }\n        }\n\n        return contentWidth;\n      }(contentWidth, visibleColumns);\n\n      setColumnWidth(column, cellWidth, contentWidth, adaptColumnWidthByRatio);\n\n      if (isNextColumnMode) {\n        nextCellWidth = Math.floor(nextCellWidth);\n        setColumnWidth(nextColumn, nextCellWidth, contentWidth, adaptColumnWidthByRatio);\n      } else {\n        var columnWidths = this._columnHeadersView.getColumnWidths();\n\n        columnWidths[resizingInfo.currentColumnIndex] = cellWidth;\n\n        var hasScroll = columnWidths.reduce(function (totalWidth, width) {\n          return totalWidth + width;\n        }, 0) > this._rowsView.contentWidth();\n\n        if (!hasScroll) {\n          var lastColumnIndex = gridCoreUtils.getLastResizableColumnIndex(visibleColumns);\n\n          if (lastColumnIndex >= 0) {\n            columnsController.columnOption(visibleColumns[lastColumnIndex].index, \"visibleWidth\", \"auto\");\n          }\n        }\n\n        for (var i = 0; i < columnWidths.length; i++) {\n          if (visibleColumns[i] && visibleColumns[i] !== column && void 0 === visibleColumns[i].width) {\n            columnsController.columnOption(visibleColumns[i].index, \"width\", columnWidths[i]);\n          }\n        }\n      }\n\n      columnsController.endUpdate();\n\n      if (!isNextColumnMode) {\n        this.component.updateDimensions();\n        var scrollable = this.component.getScrollable();\n\n        if (scrollable && isRtlParentStyle) {\n          var left = getWidth(scrollable.$content()) - getWidth(scrollable.container()) - this._scrollRight;\n\n          scrollable.scrollTo({\n            left: left\n          });\n        }\n      }\n    }\n\n    return needUpdate;\n  },\n  _subscribeToCallback: function _subscribeToCallback(callback, handler) {\n    callback.add(handler);\n\n    this._subscribesToCallbacks.push({\n      callback: callback,\n      handler: handler\n    });\n  },\n  _unsubscribeFromCallbacks: function _unsubscribeFromCallbacks() {\n    for (var i = 0; i < this._subscribesToCallbacks.length; i++) {\n      var subscribe = this._subscribesToCallbacks[i];\n      subscribe.callback.remove(subscribe.handler);\n    }\n\n    this._subscribesToCallbacks = [];\n  },\n  _unsubscribes: function _unsubscribes() {\n    this._unsubscribeFromEvents();\n\n    this._unsubscribeFromCallbacks();\n  },\n  _init: function _init() {\n    var that = this;\n\n    var generatePointsByColumnsHandler = function generatePointsByColumnsHandler() {\n      if (!that._isResizing) {\n        that.pointsByColumns(null);\n      }\n    };\n\n    var generatePointsByColumnsScrollHandler = function generatePointsByColumnsScrollHandler(offset) {\n      if (that._scrollLeft !== offset.left) {\n        that._scrollLeft = offset.left;\n        that.pointsByColumns(null);\n      }\n    };\n\n    that._columnsSeparatorView = that.getView(\"columnsSeparatorView\");\n    that._columnHeadersView = that.getView(\"columnHeadersView\");\n    that._trackerView = that.getView(\"trackerView\");\n    that._rowsView = that.getView(\"rowsView\");\n    that._columnsController = that.getController(\"columns\");\n    that._tablePositionController = that.getController(\"tablePosition\");\n    that._$parentContainer = that.component.$element();\n    that._draggingHeaderView = that.component.getView(\"draggingHeaderView\");\n\n    that._subscribeToCallback(that._columnHeadersView.renderCompleted, generatePointsByColumnsHandler);\n\n    that._subscribeToCallback(that._columnHeadersView.resizeCompleted, generatePointsByColumnsHandler);\n\n    that._subscribeToCallback(that._columnsSeparatorView.renderCompleted, function () {\n      that._unsubscribeFromEvents();\n\n      that._subscribeToEvents();\n    });\n\n    that._subscribeToCallback(that._rowsView.renderCompleted, function () {\n      that._rowsView.scrollChanged.remove(generatePointsByColumnsScrollHandler);\n\n      that._rowsView.scrollChanged.add(generatePointsByColumnsScrollHandler);\n    });\n\n    var previousScrollbarVisibility = 0 !== that._rowsView.getScrollbarWidth();\n\n    var previousTableHeight = 0;\n\n    that._subscribeToCallback(that.getController(\"tablePosition\").positionChanged, function (e) {\n      if (that._isResizing && !that._rowsView.isResizing) {\n        var scrollbarVisibility = 0 !== that._rowsView.getScrollbarWidth();\n\n        if (previousScrollbarVisibility !== scrollbarVisibility || previousTableHeight && previousTableHeight !== e.height) {\n          previousScrollbarVisibility = scrollbarVisibility;\n          previousTableHeight = e.height;\n          that.component.updateDimensions();\n        } else {\n          that._rowsView.updateFreeSpaceRowHeight();\n        }\n      }\n\n      previousTableHeight = e.height;\n    });\n  },\n  optionChanged: function optionChanged(args) {\n    this.callBase(args);\n\n    if (\"allowColumnResizing\" === args.name) {\n      if (args.value) {\n        this._init();\n\n        this._subscribeToEvents();\n      } else {\n        this._unsubscribes();\n      }\n    }\n  },\n  isResizing: function isResizing() {\n    return this._isResizing;\n  },\n  init: function init() {\n    this._subscribesToCallbacks = [];\n\n    if (allowResizing(this)) {\n      this._init();\n    }\n  },\n  pointsByColumns: function pointsByColumns(value) {\n    if (void 0 !== value) {\n      this._pointsByColumns = value;\n    } else {\n      if (!this._pointsByColumns) {\n        this._generatePointsByColumns();\n      }\n\n      return this._pointsByColumns;\n    }\n  },\n  dispose: function dispose() {\n    this._unsubscribes();\n\n    this.callBase();\n  }\n});\nvar TablePositionViewController = modules.ViewController.inherit({\n  update: function update(top) {\n    var params = {};\n\n    var $element = this._columnHeadersView.element();\n\n    var offset = $element && $element.offset();\n    var offsetTop = offset && offset.top || 0;\n    var diffOffsetTop = isDefined(top) ? Math.abs(top - offsetTop) : 0;\n    var columnsHeadersHeight = this._columnHeadersView ? this._columnHeadersView.getHeight() : 0;\n\n    var scrollBarWidth = this._rowsView.getScrollbarWidth(true);\n\n    var rowsHeight = this._rowsView ? this._rowsView.height() - scrollBarWidth : 0;\n    var columnsResizerController = this.component.getController(\"columnsResizer\");\n    var draggingHeaderView = this.component.getView(\"draggingHeaderView\");\n    params.height = columnsHeadersHeight;\n    var isDraggingOrResizing = false !== columnsResizerController.isResizing() || draggingHeaderView.isDragging();\n\n    if (isDraggingOrResizing) {\n      params.height += rowsHeight - diffOffsetTop;\n    }\n\n    if (null !== top && $element && $element.length) {\n      params.top = $element[0].offsetTop + diffOffsetTop;\n    }\n\n    this.positionChanged.fire(params);\n  },\n  init: function init() {\n    var that = this;\n    that.callBase();\n    that._columnHeadersView = this.getView(\"columnHeadersView\");\n    that._rowsView = this.getView(\"rowsView\");\n    that._pagerView = this.getView(\"pagerView\");\n\n    that._rowsView.resizeCompleted.add(function () {\n      if (that.option(\"allowColumnResizing\")) {\n        var targetPoint = that.getController(\"columnsResizer\")._targetPoint;\n\n        that.update(targetPoint ? targetPoint.y : null);\n      }\n    });\n  },\n  ctor: function ctor(component) {\n    this.callBase(component);\n    this.positionChanged = Callbacks();\n  }\n});\nvar DraggingHeaderViewController = modules.ViewController.inherit({\n  _generatePointsByColumns: function _generatePointsByColumns(options) {\n    var that = this;\n    return gridCoreUtils.getPointsByColumns(options.columnElements, function (point) {\n      return that._pointCreated(point, options.columns, options.targetDraggingPanel.getName(), options.sourceColumn);\n    }, options.isVerticalOrientation, options.startColumnIndex);\n  },\n  _pointCreated: function _pointCreated(point, columns, location, sourceColumn) {\n    var targetColumn = columns[point.columnIndex];\n    var prevColumn = columns[point.columnIndex - 1];\n\n    switch (location) {\n      case \"columnChooser\":\n        return true;\n\n      case \"headers\":\n        return sourceColumn && !sourceColumn.allowReordering || (!targetColumn || !targetColumn.allowReordering) && (!prevColumn || !prevColumn.allowReordering);\n\n      default:\n        return 0 === columns.length;\n    }\n  },\n  _subscribeToEvents: function _subscribeToEvents(draggingHeader, draggingPanels) {\n    var that = this;\n    each(draggingPanels, function (_, draggingPanel) {\n      if (draggingPanel) {\n        var columns;\n        var rowCount = draggingPanel.getRowCount ? draggingPanel.getRowCount() : 1;\n        var nameDraggingPanel = draggingPanel.getName();\n\n        var subscribeToEvents = function subscribeToEvents(index, columnElement) {\n          if (!columnElement) {\n            return;\n          }\n\n          var $columnElement = $(columnElement);\n          var column = columns[index];\n\n          if (draggingPanel.allowDragging(column, nameDraggingPanel, draggingPanels)) {\n            $columnElement.addClass(that.addWidgetPrefix(HEADERS_DRAG_ACTION_CLASS));\n            eventsEngine.on($columnElement, addNamespace(dragEventStart, MODULE_NAMESPACE), that.createAction(function (args) {\n              var e = args.event;\n              var eventData = getEventData(e);\n              draggingHeader.dragHeader({\n                deltaX: eventData.x - $(e.currentTarget).offset().left,\n                deltaY: eventData.y - $(e.currentTarget).offset().top,\n                sourceColumn: column,\n                index: column.index,\n                columnIndex: index,\n                columnElement: $columnElement,\n                sourceLocation: nameDraggingPanel,\n                draggingPanels: draggingPanels,\n                rowIndex: that._columnsController.getRowIndex(column.index, true)\n              });\n            }));\n            eventsEngine.on($columnElement, addNamespace(dragEventMove, MODULE_NAMESPACE), {\n              that: draggingHeader\n            }, that.createAction(draggingHeader.moveHeader));\n            eventsEngine.on($columnElement, addNamespace(dragEventEnd, MODULE_NAMESPACE), {\n              that: draggingHeader\n            }, that.createAction(draggingHeader.dropHeader));\n          }\n        };\n\n        for (var i = 0; i < rowCount; i++) {\n          var columnElements = draggingPanel.getColumnElements(i) || [];\n\n          if (columnElements.length) {\n            columns = draggingPanel.getColumns(i) || [];\n            each(columnElements, subscribeToEvents);\n          }\n        }\n      }\n    });\n  },\n  _unsubscribeFromEvents: function _unsubscribeFromEvents(draggingHeader, draggingPanels) {\n    var that = this;\n    each(draggingPanels, function (_, draggingPanel) {\n      if (draggingPanel) {\n        var columnElements = draggingPanel.getColumnElements() || [];\n        each(columnElements, function (index, columnElement) {\n          var $columnElement = $(columnElement);\n          eventsEngine.off($columnElement, addNamespace(dragEventStart, MODULE_NAMESPACE));\n          eventsEngine.off($columnElement, addNamespace(dragEventMove, MODULE_NAMESPACE));\n          eventsEngine.off($columnElement, addNamespace(dragEventEnd, MODULE_NAMESPACE));\n          $columnElement.removeClass(that.addWidgetPrefix(HEADERS_DRAG_ACTION_CLASS));\n        });\n      }\n    });\n  },\n  _getSeparator: function _getSeparator(targetLocation) {\n    return \"headers\" === targetLocation ? this._columnsSeparatorView : this._blockSeparatorView;\n  },\n  hideSeparators: function hideSeparators(type) {\n    var blockSeparator = this._blockSeparatorView;\n    var columnsSeparator = this._columnsSeparatorView;\n    this._animationColumnIndex = null;\n    blockSeparator && blockSeparator.hide();\n    \"block\" !== type && columnsSeparator && columnsSeparator.hide();\n  },\n  init: function init() {\n    var that = this;\n    that.callBase();\n    that._columnsController = that.getController(\"columns\");\n    that._columnHeadersView = that.getView(\"columnHeadersView\");\n    that._columnsSeparatorView = that.getView(\"columnsSeparatorView\");\n    that._draggingHeaderView = that.getView(\"draggingHeaderView\");\n    that._rowsView = that.getView(\"rowsView\");\n    that._blockSeparatorView = that.getView(\"blockSeparatorView\");\n    that._headerPanelView = that.getView(\"headerPanel\");\n    that._columnChooserView = that.getView(\"columnChooserView\");\n\n    var subscribeToEvents = function subscribeToEvents() {\n      if (that._draggingHeaderView) {\n        var draggingPanels = [that._columnChooserView, that._columnHeadersView, that._headerPanelView];\n\n        that._unsubscribeFromEvents(that._draggingHeaderView, draggingPanels);\n\n        that._subscribeToEvents(that._draggingHeaderView, draggingPanels);\n      }\n    };\n\n    that._columnHeadersView.renderCompleted.add(subscribeToEvents);\n\n    that._headerPanelView && that._headerPanelView.renderCompleted.add(subscribeToEvents);\n    that._columnChooserView && that._columnChooserView.renderCompleted.add(subscribeToEvents);\n  },\n  allowDrop: function allowDrop(parameters) {\n    return this._columnsController.allowMoveColumn(parameters.sourceColumnIndex, parameters.targetColumnIndex, parameters.sourceLocation, parameters.targetLocation);\n  },\n  drag: function drag(parameters) {\n    var sourceIndex = parameters.sourceIndex;\n    var sourceLocation = parameters.sourceLocation;\n    var sourceColumnElement = parameters.sourceColumnElement;\n    var headersView = this._columnHeadersView;\n    var rowsView = this._rowsView;\n\n    if (sourceColumnElement) {\n      sourceColumnElement.css({\n        opacity: COLUMN_OPACITY\n      });\n\n      if (\"headers\" === sourceLocation) {\n        headersView && headersView.setRowsOpacity(sourceIndex, COLUMN_OPACITY);\n        rowsView && rowsView.setRowsOpacity(sourceIndex, COLUMN_OPACITY);\n      }\n    }\n  },\n  dock: function dock(parameters) {\n    var that = this;\n    var targetColumnIndex = isObject(parameters.targetColumnIndex) ? parameters.targetColumnIndex.columnIndex : parameters.targetColumnIndex;\n    var sourceLocation = parameters.sourceLocation;\n    var targetLocation = parameters.targetLocation;\n\n    var separator = that._getSeparator(targetLocation);\n\n    var hasTargetVisibleIndex = targetColumnIndex >= 0;\n\n    that._columnHeadersView.element().find(\".\" + HEADER_ROW_CLASS).toggleClass(that.addWidgetPrefix(HEADERS_DROP_HIGHLIGHT_CLASS), \"headers\" !== sourceLocation && \"headers\" === targetLocation && !hasTargetVisibleIndex);\n\n    if (separator) {\n      if (that.allowDrop(parameters) && hasTargetVisibleIndex) {\n        if (\"group\" === targetLocation || \"columnChooser\" === targetLocation) {\n          !function () {\n            if (that._animationColumnIndex !== targetColumnIndex) {\n              that.hideSeparators();\n              separator.element()[parameters.isLast ? \"insertAfter\" : \"insertBefore\"](parameters.targetColumnElement);\n              that._animationColumnIndex = targetColumnIndex;\n              separator.show(targetLocation);\n            }\n          }();\n        } else {\n          that.hideSeparators(\"block\");\n          that.getController(\"tablePosition\").update(parameters.posY);\n          separator.moveByX(parameters.posX - separator.width());\n          separator.show();\n        }\n      } else {\n        that.hideSeparators();\n      }\n    }\n  },\n  drop: function drop(parameters) {\n    var sourceColumnElement = parameters.sourceColumnElement;\n\n    if (sourceColumnElement) {\n      sourceColumnElement.css({\n        opacity: \"\"\n      });\n\n      this._columnHeadersView.setRowsOpacity(parameters.sourceIndex, \"\");\n\n      this._rowsView.setRowsOpacity(parameters.sourceIndex, \"\");\n\n      this._columnHeadersView.element().find(\".\" + HEADER_ROW_CLASS).removeClass(this.addWidgetPrefix(HEADERS_DROP_HIGHLIGHT_CLASS));\n    }\n\n    if (this.allowDrop(parameters)) {\n      var separator = this._getSeparator(parameters.targetLocation);\n\n      if (separator) {\n        separator.hide();\n      }\n\n      this._columnsController.moveColumn(parameters.sourceColumnIndex, parameters.targetColumnIndex, parameters.sourceLocation, parameters.targetLocation);\n    }\n  },\n  dispose: function dispose() {\n    if (this._draggingHeaderView) {\n      this._unsubscribeFromEvents(this._draggingHeaderView, [this._columnChooserView, this._columnHeadersView, this._headerPanelView]);\n    }\n  }\n});\nexport var columnsResizingReorderingModule = {\n  views: {\n    columnsSeparatorView: ColumnsSeparatorView,\n    blockSeparatorView: BlockSeparatorView,\n    draggingHeaderView: DraggingHeaderView,\n    trackerView: TrackerView\n  },\n  controllers: {\n    draggingHeader: DraggingHeaderViewController,\n    tablePosition: TablePositionViewController,\n    columnsResizer: ColumnsResizerViewController\n  },\n  extenders: {\n    views: {\n      rowsView: {\n        _needUpdateRowHeight: function _needUpdateRowHeight(itemCount) {\n          var wordWrapEnabled = this.option(\"wordWrapEnabled\");\n          var columnsResizerController = this.getController(\"columnsResizer\");\n          var isResizing = columnsResizerController.isResizing();\n          return this.callBase.apply(this, arguments) || itemCount > 0 && wordWrapEnabled && isResizing;\n        }\n      }\n    },\n    controllers: {\n      editorFactory: {\n        renderFocusOverlay: function renderFocusOverlay() {\n          if (this.getController(\"columnsResizer\").isResizing()) {\n            return;\n          }\n\n          return this.callBase.apply(this, arguments);\n        }\n      }\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module"}