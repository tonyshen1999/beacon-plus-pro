{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/diagram/ui.diagram.dialog_manager.js)\r\n * Version: 21.2.6\r\n * Build date: Tue Mar 01 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../../core/renderer\";\nimport { getDiagram } from \"./diagram.importer\";\nimport messageLocalization from \"../../localization/message\";\nimport FileUploader from \"../file_uploader\";\nimport { getWindow } from \"../../core/utils/window\";\nvar DiagramDialogManager = {\n  getConfigurations: function getConfigurations() {\n    var _getDiagram = getDiagram(),\n        DiagramCommand = _getDiagram.DiagramCommand;\n\n    return this.dialogList || (this.dialogList = [{\n      command: DiagramCommand.InsertShapeImage,\n      title: messageLocalization.format(\"dxDiagram-dialogInsertShapeImageTitle\"),\n      onGetContent: this.getChangeImageDialogContent\n    }, {\n      command: DiagramCommand.EditShapeImage,\n      title: messageLocalization.format(\"dxDiagram-dialogEditShapeImageTitle\"),\n      onGetContent: this.getChangeImageDialogContent\n    }]);\n  },\n  getChangeImageDialogContent: function getChangeImageDialogContent(args) {\n    var $uploader = $(\"<div>\");\n\n    args.component._createComponent($uploader, FileUploader, {\n      selectButtonText: messageLocalization.format(\"dxDiagram-dialogEditShapeImageSelectButton\"),\n      accept: \"image/*\",\n      uploadMode: \"useForm\",\n      onValueChanged: function onValueChanged(e) {\n        var window = getWindow();\n        var reader = new window.FileReader();\n\n        reader.onload = function (e) {\n          args.component._commandParameter = e.target.result;\n        };\n\n        reader.readAsDataURL(e.value[0]);\n      }\n    });\n\n    return $uploader;\n  },\n  getDialogParameters: function getDialogParameters(command) {\n    var commandIndex = this.getConfigurations().map(function (c) {\n      return c.command;\n    }).indexOf(command);\n\n    if (commandIndex >= 0) {\n      return this.getConfigurations()[commandIndex];\n    } else {\n      return null;\n    }\n  }\n};\nexport default DiagramDialogManager;","map":null,"metadata":{},"sourceType":"module"}