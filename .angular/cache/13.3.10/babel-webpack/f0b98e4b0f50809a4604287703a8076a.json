{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/map/provider.js)\r\n * Version: 21.2.6\r\n * Build date: Tue Mar 01 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport Promise from \"../../core/polyfills/promise\";\nimport Class from \"../../core/class\";\nimport { map } from \"../../core/utils/iterator\";\nimport { isPlainObject, isNumeric } from \"../../core/utils/type\";\nimport { addNamespace } from \"../../events/utils/index\";\nvar abstract = Class.abstract;\nvar Provider = Class.inherit({\n  _defaultRouteWeight: function _defaultRouteWeight() {\n    return 5;\n  },\n  _defaultRouteOpacity: function _defaultRouteOpacity() {\n    return .5;\n  },\n  _defaultRouteColor: function _defaultRouteColor() {\n    return \"#0000FF\";\n  },\n  ctor: function ctor(map, $container) {\n    this._mapWidget = map;\n    this._$container = $container;\n  },\n  render: function render(markerOptions, routeOptions) {\n    return this._renderImpl().then(function () {\n      return Promise.all([this._applyFunctionIfNeeded(\"addMarkers\", markerOptions), this._applyFunctionIfNeeded(\"addRoutes\", routeOptions)]).then(function () {\n        return true;\n      });\n    }.bind(this));\n  },\n  _renderImpl: abstract,\n  updateDimensions: abstract,\n  updateMapType: abstract,\n  updateBounds: abstract,\n  updateCenter: abstract,\n  updateZoom: abstract,\n  updateControls: abstract,\n  updateMarkers: function updateMarkers(markerOptionsToRemove, markerOptionsToAdd) {\n    return new Promise(function (resolve) {\n      return this._applyFunctionIfNeeded(\"removeMarkers\", markerOptionsToRemove).then(function (removeValue) {\n        this._applyFunctionIfNeeded(\"addMarkers\", markerOptionsToAdd).then(function (addValue) {\n          resolve(addValue ? addValue : removeValue);\n        });\n      }.bind(this));\n    }.bind(this));\n  },\n  addMarkers: abstract,\n  removeMarkers: abstract,\n  adjustViewport: abstract,\n  updateRoutes: function updateRoutes(routeOptionsToRemove, routeOptionsToAdd) {\n    return new Promise(function (resolve) {\n      return this._applyFunctionIfNeeded(\"removeRoutes\", routeOptionsToRemove).then(function (removeValue) {\n        this._applyFunctionIfNeeded(\"addRoutes\", routeOptionsToAdd).then(function (addValue) {\n          resolve(addValue ? addValue : removeValue);\n        });\n      }.bind(this));\n    }.bind(this));\n  },\n  addRoutes: abstract,\n  removeRoutes: abstract,\n  clean: abstract,\n  map: function map() {\n    return this._map;\n  },\n  isEventsCanceled: function isEventsCanceled() {\n    return false;\n  },\n  _option: function _option(name, value) {\n    if (void 0 === value) {\n      return this._mapWidget.option(name);\n    }\n\n    this._mapWidget.setOptionSilent(name, value);\n  },\n  _keyOption: function _keyOption(providerName) {\n    var key = this._option(\"apiKey\");\n\n    return void 0 === key[providerName] ? key : key[providerName];\n  },\n  _parseTooltipOptions: function _parseTooltipOptions(option) {\n    return {\n      text: option.text || option,\n      visible: option.isShown || false\n    };\n  },\n  _getLatLng: function _getLatLng(location) {\n    if (\"string\" === typeof location) {\n      var coords = map(location.split(\",\"), function (item) {\n        return item.trim();\n      });\n      var numericRegex = /^[-+]?[0-9]*\\.?[0-9]*$/;\n\n      if (2 === coords.length && coords[0].match(numericRegex) && coords[1].match(numericRegex)) {\n        return {\n          lat: parseFloat(coords[0]),\n          lng: parseFloat(coords[1])\n        };\n      }\n    } else if (Array.isArray(location) && 2 === location.length) {\n      return {\n        lat: location[0],\n        lng: location[1]\n      };\n    } else if (isPlainObject(location) && isNumeric(location.lat) && isNumeric(location.lng)) {\n      return location;\n    }\n\n    return null;\n  },\n  _areBoundsSet: function _areBoundsSet() {\n    return this._option(\"bounds.northEast\") && this._option(\"bounds.southWest\");\n  },\n  _addEventNamespace: function _addEventNamespace(name) {\n    return addNamespace(name, this._mapWidget.NAME);\n  },\n  _applyFunctionIfNeeded: function _applyFunctionIfNeeded(fnName, array) {\n    if (!array.length) {\n      return Promise.resolve();\n    }\n\n    return this[fnName](array);\n  },\n  _fireAction: function _fireAction(name, actionArguments) {\n    this._mapWidget._createActionByOption(name)(actionArguments);\n  },\n  _fireClickAction: function _fireClickAction(actionArguments) {\n    this._fireAction(\"onClick\", actionArguments);\n  },\n  _fireMarkerAddedAction: function _fireMarkerAddedAction(actionArguments) {\n    this._fireAction(\"onMarkerAdded\", actionArguments);\n  },\n  _fireMarkerRemovedAction: function _fireMarkerRemovedAction(actionArguments) {\n    this._fireAction(\"onMarkerRemoved\", actionArguments);\n  },\n  _fireRouteAddedAction: function _fireRouteAddedAction(actionArguments) {\n    this._fireAction(\"onRouteAdded\", actionArguments);\n  },\n  _fireRouteRemovedAction: function _fireRouteRemovedAction(actionArguments) {\n    this._fireAction(\"onRouteRemoved\", actionArguments);\n  }\n});\nexport default Provider;","map":null,"metadata":{},"sourceType":"module"}