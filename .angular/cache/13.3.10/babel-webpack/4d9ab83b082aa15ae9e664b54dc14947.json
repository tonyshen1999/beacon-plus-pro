{"ast":null,"code":"/**\r\n * DevExtreme (esm/viz/funnel/tooltip.js)\r\n * Version: 21.2.6\r\n * Build date: Tue Mar 01 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { noop } from \"../../core/utils/common\";\nimport { plugin as pluginTooltip } from \"../core/tooltip\";\n\nfunction getCoords(coords, figureCoords, renderer) {\n  var offset = renderer.getRootOffset();\n  return coords || figureCoords && [(figureCoords[0] + figureCoords[2]) / 2 + offset.left, (figureCoords[1] + figureCoords[5]) / 2 + offset.top] || [-1e3, -1e3];\n}\n\nexport var plugin = {\n  name: \"funnel-tooltip\",\n  init: noop,\n  dispose: noop,\n  extenders: {\n    _buildNodes: function _buildNodes() {\n      this.hideTooltip();\n    },\n    _change_TILING: function _change_TILING() {\n      if (this._tooltipIndex >= 0) {\n        this._moveTooltip(this._items[this._tooltipIndex]);\n      }\n    }\n  },\n  members: {\n    hideTooltip: function hideTooltip() {\n      if (this._tooltipIndex >= 0) {\n        this._tooltipIndex = -1;\n\n        this._tooltip.hide();\n      }\n    },\n    _moveTooltip: function _moveTooltip(item, coords) {\n      var xy = getCoords(coords, item.coords, this._renderer);\n\n      this._tooltip.move(xy[0], xy[1], 0);\n    },\n    _showTooltip: function _showTooltip(index, coords) {\n      var that = this;\n      var tooltip = that._tooltip;\n      var item = that._items[index];\n\n      if (that._tooltipIndex === index) {\n        that._moveTooltip(item, coords);\n\n        return;\n      }\n\n      var callback = function callback(result) {\n        if (void 0 === result) {\n          return;\n        }\n\n        if (!result) {\n          tooltip.hide();\n        }\n\n        that._tooltipIndex = result ? index : -1;\n      };\n\n      var xy = getCoords(coords, item.coords, this._renderer);\n      callback(tooltip.show({\n        value: item.value,\n        valueText: tooltip.formatValue(item.value),\n        percentText: tooltip.formatValue(item.percent, \"percent\"),\n        percent: item.percent,\n        item: item\n      }, {\n        x: xy[0],\n        y: xy[1],\n        offset: 0\n      }, {\n        item: item\n      }, void 0, callback));\n    }\n  },\n  customize: function customize(constructor) {\n    constructor.addPlugin(pluginTooltip);\n  }\n};","map":null,"metadata":{},"sourceType":"module"}