{"ast":null,"code":"import _classCallCheck from \"/Users/tonyshen/beacon-pro/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/tonyshen/beacon-pro/node_modules/@babel/runtime/helpers/esm/createClass.js\";\n\n/**\r\n * DevExtreme (esm/file_management/provider_base.js)\r\n * Version: 21.2.6\r\n * Build date: Tue Mar 01 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { compileGetter } from \"../core/utils/data\";\nimport { ensureDefined } from \"../core/utils/common\";\nimport dateSerialization from \"../core/utils/date_serialization\";\nimport { each } from \"../core/utils/iterator\";\nimport { isPromise } from \"../core/utils/type\";\nimport { Deferred, fromPromise } from \"../core/utils/deferred\";\nimport FileSystemItem from \"./file_system_item\";\nvar DEFAULT_FILE_UPLOAD_CHUNK_SIZE = 2e5;\n\nvar FileSystemProviderBase = /*#__PURE__*/function () {\n  function FileSystemProviderBase(options) {\n    _classCallCheck(this, FileSystemProviderBase);\n\n    options = ensureDefined(options, {});\n    this._keyGetter = compileGetter(this._getKeyExpr(options));\n    this._nameGetter = compileGetter(this._getNameExpr(options));\n    this._isDirGetter = compileGetter(this._getIsDirExpr(options));\n    this._sizeGetter = compileGetter(this._getSizeExpr(options));\n    this._dateModifiedGetter = compileGetter(this._getDateModifiedExpr(options));\n    this._thumbnailGetter = compileGetter(options.thumbnailExpr || \"thumbnail\");\n  }\n\n  _createClass(FileSystemProviderBase, [{\n    key: \"getItems\",\n    value: function getItems(parentDirectory) {\n      return [];\n    }\n  }, {\n    key: \"renameItem\",\n    value: function renameItem(item, name) {}\n  }, {\n    key: \"createDirectory\",\n    value: function createDirectory(parentDirectory, name) {}\n  }, {\n    key: \"deleteItems\",\n    value: function deleteItems(items) {}\n  }, {\n    key: \"moveItems\",\n    value: function moveItems(items, destinationDirectory) {}\n  }, {\n    key: \"copyItems\",\n    value: function copyItems(items, destinationDirectory) {}\n  }, {\n    key: \"uploadFileChunk\",\n    value: function uploadFileChunk(fileData, chunksInfo, destinationDirectory) {}\n  }, {\n    key: \"abortFileUpload\",\n    value: function abortFileUpload(fileData, chunksInfo, destinationDirectory) {}\n  }, {\n    key: \"downloadItems\",\n    value: function downloadItems(items) {}\n  }, {\n    key: \"getItemsContent\",\n    value: function getItemsContent(items) {}\n  }, {\n    key: \"getFileUploadChunkSize\",\n    value: function getFileUploadChunkSize() {\n      return DEFAULT_FILE_UPLOAD_CHUNK_SIZE;\n    }\n  }, {\n    key: \"_convertDataObjectsToFileItems\",\n    value: function _convertDataObjectsToFileItems(entries, pathInfo) {\n      var _this = this;\n\n      var result = [];\n      each(entries, function (_, entry) {\n        var fileItem = _this._createFileItem(entry, pathInfo);\n\n        result.push(fileItem);\n      });\n      return result;\n    }\n  }, {\n    key: \"_createFileItem\",\n    value: function _createFileItem(dataObj, pathInfo) {\n      var key = this._keyGetter(dataObj);\n\n      var fileItem = new FileSystemItem(pathInfo, this._nameGetter(dataObj), !!this._isDirGetter(dataObj), key);\n      fileItem.size = this._sizeGetter(dataObj);\n\n      if (void 0 === fileItem.size) {\n        fileItem.size = 0;\n      }\n\n      fileItem.dateModified = dateSerialization.deserializeDate(this._dateModifiedGetter(dataObj));\n\n      if (void 0 === fileItem.dateModified) {\n        fileItem.dateModified = new Date();\n      }\n\n      if (fileItem.isDirectory) {\n        fileItem.hasSubDirectories = this._hasSubDirs(dataObj);\n      }\n\n      if (!key) {\n        fileItem.key = fileItem.relativeName;\n      }\n\n      fileItem.thumbnail = this._thumbnailGetter(dataObj) || \"\";\n      fileItem.dataItem = dataObj;\n      return fileItem;\n    }\n  }, {\n    key: \"_hasSubDirs\",\n    value: function _hasSubDirs(dataObj) {\n      return true;\n    }\n  }, {\n    key: \"_getKeyExpr\",\n    value: function _getKeyExpr(options) {\n      return options.keyExpr || this._defaultKeyExpr;\n    }\n  }, {\n    key: \"_defaultKeyExpr\",\n    value: function _defaultKeyExpr(fileItem) {\n      if (2 === arguments.length) {\n        fileItem.__KEY__ = arguments[1];\n        return;\n      }\n\n      return Object.prototype.hasOwnProperty.call(fileItem, \"__KEY__\") ? fileItem.__KEY__ : null;\n    }\n  }, {\n    key: \"_getNameExpr\",\n    value: function _getNameExpr(options) {\n      return options.nameExpr || \"name\";\n    }\n  }, {\n    key: \"_getIsDirExpr\",\n    value: function _getIsDirExpr(options) {\n      return options.isDirectoryExpr || \"isDirectory\";\n    }\n  }, {\n    key: \"_getSizeExpr\",\n    value: function _getSizeExpr(options) {\n      return options.sizeExpr || \"size\";\n    }\n  }, {\n    key: \"_getDateModifiedExpr\",\n    value: function _getDateModifiedExpr(options) {\n      return options.dateModifiedExpr || \"dateModified\";\n    }\n  }, {\n    key: \"_executeActionAsDeferred\",\n    value: function _executeActionAsDeferred(action, keepResult) {\n      var deferred = new Deferred();\n\n      try {\n        var result = action();\n\n        if (isPromise(result)) {\n          fromPromise(result).done(function (userResult) {\n            return deferred.resolve(keepResult && userResult || void 0);\n          }).fail(function (error) {\n            return deferred.reject(error);\n          });\n        } else {\n          deferred.resolve(keepResult && result || void 0);\n        }\n      } catch (error) {\n        return deferred.reject(error);\n      }\n\n      return deferred.promise();\n    }\n  }]);\n\n  return FileSystemProviderBase;\n}();\n\nexport default FileSystemProviderBase;","map":null,"metadata":{},"sourceType":"module"}