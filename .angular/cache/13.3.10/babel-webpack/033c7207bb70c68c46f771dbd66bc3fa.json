{"ast":null,"code":"import _classCallCheck from \"/Users/tonyshen/beacon-pro/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/tonyshen/beacon-pro/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/tonyshen/beacon-pro/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/tonyshen/beacon-pro/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\n\n/**\r\n * DevExtreme (esm/ui/popover/popover_position_controller.js)\r\n * Version: 21.2.6\r\n * Build date: Tue Mar 01 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"shading\", \"$arrow\"];\nimport { isDefined, isString } from \"../../core/utils/type\";\nimport { extend } from \"../../core/utils/extend\";\nimport positionUtils from \"../../animation/position\";\nimport { pairToObject } from \"../../core/utils/common\";\nimport { borderWidthStyles } from \"../../renovation/ui/resizable/utils\";\nimport { getWidth, getHeight } from \"../../core/utils/size\";\nimport { OverlayPositionController } from \"../overlay/overlay_position_controller\";\nvar WEIGHT_OF_SIDES = {\n  left: -1,\n  top: -1,\n  center: 0,\n  right: 1,\n  bottom: 1\n};\nvar POPOVER_POSITION_ALIASES = {\n  top: {\n    my: \"bottom center\",\n    at: \"top center\",\n    collision: \"fit flip\"\n  },\n  bottom: {\n    my: \"top center\",\n    at: \"bottom center\",\n    collision: \"fit flip\"\n  },\n  right: {\n    my: \"left center\",\n    at: \"right center\",\n    collision: \"flip fit\"\n  },\n  left: {\n    my: \"right center\",\n    at: \"left center\",\n    collision: \"flip fit\"\n  }\n};\nvar POPOVER_DEFAULT_BOUNDARY_OFFSET = {\n  h: 10,\n  v: 10\n};\n\nvar PopoverPositionController = /*#__PURE__*/function (_OverlayPositionContr) {\n  _inherits(PopoverPositionController, _OverlayPositionContr);\n\n  var _super = _createSuper(PopoverPositionController);\n\n  function PopoverPositionController(_ref) {\n    var _this;\n\n    _classCallCheck(this, PopoverPositionController);\n\n    var shading = _ref.shading,\n        $arrow = _ref.$arrow,\n        args = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n    _this = _super.call(this, args);\n    _this._props = _extends({}, _this._props, {\n      shading: shading\n    });\n    _this._$arrow = $arrow;\n    _this._positionSide = void 0;\n    return _this;\n  }\n\n  _createClass(PopoverPositionController, [{\n    key: \"positionWrapper\",\n    value: function positionWrapper() {\n      if (this._props.shading) {\n        this._$wrapper.css({\n          top: 0,\n          left: 0\n        });\n      }\n    }\n  }, {\n    key: \"_renderBoundaryOffset\",\n    value: function _renderBoundaryOffset() {}\n  }, {\n    key: \"_getContainerPosition\",\n    value: function _getContainerPosition() {\n      var offset = pairToObject(this._position.offset || \"\");\n      var hOffset = offset.h,\n          vOffset = offset.v;\n\n      var isVerticalSide = this._isVerticalSide();\n\n      var isHorizontalSide = this._isHorizontalSide();\n\n      if (isVerticalSide || isHorizontalSide) {\n        var isPopoverInside = this._isPopoverInside();\n\n        var sign = (isPopoverInside ? -1 : 1) * WEIGHT_OF_SIDES[this._positionSide];\n        var arrowSize = isVerticalSide ? getHeight(this._$arrow) : getWidth(this._$arrow);\n\n        var arrowSizeCorrection = this._getContentBorderWidth(this._positionSide);\n\n        var arrowOffset = sign * (arrowSize - arrowSizeCorrection);\n        isVerticalSide ? vOffset += arrowOffset : hOffset += arrowOffset;\n      }\n\n      return extend({}, this._position, {\n        offset: hOffset + \" \" + vOffset\n      });\n    }\n  }, {\n    key: \"_getContentBorderWidth\",\n    value: function _getContentBorderWidth(side) {\n      var borderWidth = this._$content.css(borderWidthStyles[side]);\n\n      return parseInt(borderWidth) || 0;\n    }\n  }, {\n    key: \"_isPopoverInside\",\n    value: function _isPopoverInside() {\n      var my = positionUtils.setup.normalizeAlign(this._position.my);\n      var at = positionUtils.setup.normalizeAlign(this._position.at);\n      return my.h === at.h && my.v === at.v;\n    }\n  }, {\n    key: \"_isVerticalSide\",\n    value: function _isVerticalSide() {\n      var side = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this._positionSide;\n      return \"top\" === side || \"bottom\" === side;\n    }\n  }, {\n    key: \"_isHorizontalSide\",\n    value: function _isHorizontalSide() {\n      var side = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this._positionSide;\n      return \"left\" === side || \"right\" === side;\n    }\n  }, {\n    key: \"_getDisplaySide\",\n    value: function _getDisplaySide(position) {\n      var my = positionUtils.setup.normalizeAlign(position.my);\n      var at = positionUtils.setup.normalizeAlign(position.at);\n      var weightSign = WEIGHT_OF_SIDES[my.h] === WEIGHT_OF_SIDES[at.h] && WEIGHT_OF_SIDES[my.v] === WEIGHT_OF_SIDES[at.v] ? -1 : 1;\n      var horizontalWeight = Math.abs(WEIGHT_OF_SIDES[my.h] - weightSign * WEIGHT_OF_SIDES[at.h]);\n      var verticalWeight = Math.abs(WEIGHT_OF_SIDES[my.v] - weightSign * WEIGHT_OF_SIDES[at.v]);\n      return horizontalWeight > verticalWeight ? at.h : at.v;\n    }\n  }, {\n    key: \"_normalizePosition\",\n    value: function _normalizePosition(positionProp, targetProp) {\n      var defaultPositionConfig = {\n        of: targetProp,\n        boundaryOffset: POPOVER_DEFAULT_BOUNDARY_OFFSET\n      };\n      var resultPosition;\n\n      if (isDefined(positionProp)) {\n        resultPosition = extend(true, {}, defaultPositionConfig, this._positionToObject(positionProp));\n      } else {\n        resultPosition = defaultPositionConfig;\n      }\n\n      this._positionSide = this._getDisplaySide(resultPosition);\n      return resultPosition;\n    }\n  }, {\n    key: \"_positionToObject\",\n    value: function _positionToObject(positionProp) {\n      if (isString(positionProp)) {\n        return extend({}, POPOVER_POSITION_ALIASES[positionProp]);\n      }\n\n      return positionProp;\n    }\n  }]);\n\n  return PopoverPositionController;\n}(OverlayPositionController);\n\nexport { PopoverPositionController, POPOVER_POSITION_ALIASES };","map":null,"metadata":{},"sourceType":"module"}