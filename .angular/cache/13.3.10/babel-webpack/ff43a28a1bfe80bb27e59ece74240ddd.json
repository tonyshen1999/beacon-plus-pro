{"ast":null,"code":"/**\r\n * DevExtreme (esm/events/pointer/mouse_and_touch.js)\r\n * Version: 21.2.6\r\n * Build date: Tue Mar 01 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { extend } from \"../../core/utils/extend\";\nimport BaseStrategy from \"./base\";\nimport MouseStrategy from \"./mouse\";\nimport TouchStrategy from \"./touch\";\nimport { isMouseEvent } from \"../utils/index\";\nvar eventMap = {\n  dxpointerdown: \"touchstart mousedown\",\n  dxpointermove: \"touchmove mousemove\",\n  dxpointerup: \"touchend mouseup\",\n  dxpointercancel: \"touchcancel\",\n  dxpointerover: \"mouseover\",\n  dxpointerout: \"mouseout\",\n  dxpointerenter: \"mouseenter\",\n  dxpointerleave: \"mouseleave\"\n};\nvar activated = false;\n\nvar activateStrategy = function activateStrategy() {\n  if (activated) {\n    return;\n  }\n\n  MouseStrategy.activate();\n  activated = true;\n};\n\nvar MouseAndTouchStrategy = BaseStrategy.inherit({\n  EVENT_LOCK_TIMEOUT: 100,\n  ctor: function ctor() {\n    this.callBase.apply(this, arguments);\n    activateStrategy();\n  },\n  _handler: function _handler(e) {\n    var isMouse = isMouseEvent(e);\n\n    if (!isMouse) {\n      this._skipNextEvents = true;\n    }\n\n    if (isMouse && this._mouseLocked) {\n      return;\n    }\n\n    if (isMouse && this._skipNextEvents) {\n      this._skipNextEvents = false;\n      this._mouseLocked = true;\n      clearTimeout(this._unlockMouseTimer);\n      var that = this;\n      this._unlockMouseTimer = setTimeout(function () {\n        that._mouseLocked = false;\n      }, this.EVENT_LOCK_TIMEOUT);\n      return;\n    }\n\n    return this.callBase(e);\n  },\n  _fireEvent: function _fireEvent(args) {\n    var normalizer = isMouseEvent(args.originalEvent) ? MouseStrategy.normalize : TouchStrategy.normalize;\n    return this.callBase(extend(normalizer(args.originalEvent), args));\n  },\n  dispose: function dispose() {\n    this.callBase();\n    this._skipNextEvents = false;\n    this._mouseLocked = false;\n    clearTimeout(this._unlockMouseTimer);\n  }\n});\nMouseAndTouchStrategy.map = eventMap;\nMouseAndTouchStrategy.resetObserver = MouseStrategy.resetObserver;\nexport default MouseAndTouchStrategy;","map":null,"metadata":{},"sourceType":"module"}