{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/load_panel.js)\r\n * Version: 21.2.6\r\n * Build date: Tue Mar 01 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../core/renderer\";\nimport { noop } from \"../core/utils/common\";\nimport messageLocalization from \"../localization/message\";\nimport registerComponent from \"../core/component_registrator\";\nimport { extend } from \"../core/utils/extend\";\nimport LoadIndicator from \"./load_indicator\";\nimport Overlay from \"./overlay/ui.overlay\";\nimport { Deferred } from \"../core/utils/deferred\";\nimport { isMaterial } from \"./themes\";\nvar LOADPANEL_CLASS = \"dx-loadpanel\";\nvar LOADPANEL_WRAPPER_CLASS = \"dx-loadpanel-wrapper\";\nvar LOADPANEL_INDICATOR_CLASS = \"dx-loadpanel-indicator\";\nvar LOADPANEL_MESSAGE_CLASS = \"dx-loadpanel-message\";\nvar LOADPANEL_CONTENT_CLASS = \"dx-loadpanel-content\";\nvar LOADPANEL_CONTENT_WRAPPER_CLASS = \"dx-loadpanel-content-wrapper\";\nvar LOADPANEL_PANE_HIDDEN_CLASS = \"dx-loadpanel-pane-hidden\";\nvar LoadPanel = Overlay.inherit({\n  _supportedKeys: function _supportedKeys() {\n    return extend(this.callBase(), {\n      escape: noop\n    });\n  },\n  _getDefaultOptions: function _getDefaultOptions() {\n    return extend(this.callBase(), {\n      message: messageLocalization.format(\"Loading\"),\n      width: 222,\n      height: 90,\n      animation: null,\n      showIndicator: true,\n      indicatorSrc: \"\",\n      showPane: true,\n      delay: 0,\n      templatesRenderAsynchronously: false,\n      hideTopOverlayHandler: null,\n      resizeEnabled: false,\n      focusStateEnabled: false\n    });\n  },\n  _defaultOptionsRules: function _defaultOptionsRules() {\n    return this.callBase().concat([{\n      device: {\n        platform: \"generic\"\n      },\n      options: {\n        shadingColor: \"transparent\"\n      }\n    }, {\n      device: function device() {\n        return isMaterial();\n      },\n      options: {\n        message: \"\",\n        width: 60,\n        height: 60,\n        maxHeight: 60,\n        maxWidth: 60\n      }\n    }]);\n  },\n  _init: function _init() {\n    this.callBase.apply(this, arguments);\n  },\n  _render: function _render() {\n    this.callBase();\n    this.$element().addClass(LOADPANEL_CLASS);\n    this.$wrapper().addClass(LOADPANEL_WRAPPER_CLASS);\n  },\n  _renderContentImpl: function _renderContentImpl() {\n    this.callBase();\n    this.$content().addClass(LOADPANEL_CONTENT_CLASS);\n    this._$loadPanelContentWrapper = $(\"<div>\").addClass(LOADPANEL_CONTENT_WRAPPER_CLASS);\n\n    this._$loadPanelContentWrapper.appendTo(this.$content());\n\n    this._togglePaneVisible();\n\n    this._cleanPreviousContent();\n\n    this._renderLoadIndicator();\n\n    this._renderMessage();\n  },\n  _show: function _show() {\n    var delay = this.option(\"delay\");\n\n    if (!delay) {\n      return this.callBase();\n    }\n\n    var deferred = new Deferred();\n    var callBase = this.callBase.bind(this);\n\n    this._clearShowTimeout();\n\n    this._showTimeout = setTimeout(function () {\n      callBase().done(function () {\n        deferred.resolve();\n      });\n    }, delay);\n    return deferred.promise();\n  },\n  _hide: function _hide() {\n    this._clearShowTimeout();\n\n    return this.callBase();\n  },\n  _clearShowTimeout: function _clearShowTimeout() {\n    clearTimeout(this._showTimeout);\n  },\n  _renderMessage: function _renderMessage() {\n    if (!this._$loadPanelContentWrapper) {\n      return;\n    }\n\n    var message = this.option(\"message\");\n\n    if (!message) {\n      return;\n    }\n\n    var $message = $(\"<div>\").addClass(LOADPANEL_MESSAGE_CLASS).text(message);\n\n    this._$loadPanelContentWrapper.append($message);\n  },\n  _renderLoadIndicator: function _renderLoadIndicator() {\n    if (!this._$loadPanelContentWrapper || !this.option(\"showIndicator\")) {\n      return;\n    }\n\n    if (!this._$indicator) {\n      this._$indicator = $(\"<div>\").addClass(LOADPANEL_INDICATOR_CLASS).appendTo(this._$loadPanelContentWrapper);\n    }\n\n    this._createComponent(this._$indicator, LoadIndicator, {\n      indicatorSrc: this.option(\"indicatorSrc\")\n    });\n  },\n  _cleanPreviousContent: function _cleanPreviousContent() {\n    this.$content().find(\".\" + LOADPANEL_MESSAGE_CLASS).remove();\n    this.$content().find(\".\" + LOADPANEL_INDICATOR_CLASS).remove();\n    delete this._$indicator;\n  },\n  _togglePaneVisible: function _togglePaneVisible() {\n    this.$content().toggleClass(LOADPANEL_PANE_HIDDEN_CLASS, !this.option(\"showPane\"));\n  },\n  _optionChanged: function _optionChanged(args) {\n    switch (args.name) {\n      case \"delay\":\n        break;\n\n      case \"message\":\n      case \"showIndicator\":\n        this._cleanPreviousContent();\n\n        this._renderLoadIndicator();\n\n        this._renderMessage();\n\n        break;\n\n      case \"showPane\":\n        this._togglePaneVisible();\n\n        break;\n\n      case \"indicatorSrc\":\n        this._renderLoadIndicator();\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _dispose: function _dispose() {\n    this._clearShowTimeout();\n\n    this.callBase();\n  }\n});\nregisterComponent(\"dxLoadPanel\", LoadPanel);\nexport default LoadPanel;","map":null,"metadata":{},"sourceType":"module"}