{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/date_box/ui.date_utils.js)\r\n * Version: 21.2.6\r\n * Build date: Tue Mar 01 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../../core/renderer\";\nimport dateSerialization from \"../../core/utils/date_serialization\";\nimport { isDate } from \"../../core/utils/type\";\nimport { each } from \"../../core/utils/iterator\";\nimport dateLocalization from \"../../localization/date\";\nvar DATE_COMPONENTS = [\"year\", \"day\", \"month\", \"day\"];\nvar TIME_COMPONENTS = [\"hours\", \"minutes\", \"seconds\", \"milliseconds\"];\nvar ONE_MINUTE = 6e4;\nvar ONE_DAY = 60 * ONE_MINUTE * 24;\nvar ONE_YEAR = 365 * ONE_DAY;\n\nvar getStringFormat = function getStringFormat(format) {\n  var formatType = typeof format;\n\n  if (\"string\" === formatType) {\n    return \"format\";\n  }\n\n  if (\"object\" === formatType && void 0 !== format.type) {\n    return format.type;\n  }\n\n  return null;\n};\n\nvar dateUtils = {\n  SUPPORTED_FORMATS: [\"date\", \"time\", \"datetime\"],\n  ONE_MINUTE: ONE_MINUTE,\n  ONE_DAY: ONE_DAY,\n  ONE_YEAR: ONE_YEAR,\n  MIN_DATEVIEW_DEFAULT_DATE: new Date(1900, 0, 1),\n  MAX_DATEVIEW_DEFAULT_DATE: function () {\n    var newDate = new Date();\n    return new Date(newDate.getFullYear() + 50, newDate.getMonth(), newDate.getDate(), 23, 59, 59);\n  }(),\n  FORMATS_INFO: {\n    date: {\n      getStandardPattern: function getStandardPattern() {\n        return \"yyyy-MM-dd\";\n      },\n      components: DATE_COMPONENTS\n    },\n    time: {\n      getStandardPattern: function getStandardPattern() {\n        return \"HH:mm\";\n      },\n      components: TIME_COMPONENTS\n    },\n    datetime: {\n      getStandardPattern: function getStandardPattern() {\n        var standardPattern;\n        !function () {\n          var $input = $(\"<input>\").attr(\"type\", \"datetime\");\n          $input.val(\"2000-01-01T01:01Z\");\n\n          if ($input.val()) {\n            standardPattern = \"yyyy-MM-ddTHH:mmZ\";\n          }\n        }();\n\n        if (!standardPattern) {\n          standardPattern = \"yyyy-MM-ddTHH:mm:ssZ\";\n        }\n\n        dateUtils.FORMATS_INFO.datetime.getStandardPattern = function () {\n          return standardPattern;\n        };\n\n        return standardPattern;\n      },\n      components: [].concat(DATE_COMPONENTS, TIME_COMPONENTS)\n    },\n    \"datetime-local\": {\n      getStandardPattern: function getStandardPattern() {\n        return \"yyyy-MM-ddTHH:mm:ss\";\n      },\n      components: [].concat(DATE_COMPONENTS, [\"hours\", \"minutes\", \"seconds\"])\n    }\n  },\n  FORMATS_MAP: {\n    date: \"shortdate\",\n    time: \"shorttime\",\n    datetime: \"shortdateshorttime\"\n  },\n  SUBMIT_FORMATS_MAP: {\n    date: \"date\",\n    time: \"time\",\n    datetime: \"datetime-local\"\n  },\n  toStandardDateFormat: function toStandardDateFormat(date, type) {\n    var pattern = dateUtils.FORMATS_INFO[type].getStandardPattern();\n    return dateSerialization.serializeDate(date, pattern);\n  },\n  fromStandardDateFormat: function fromStandardDateFormat(text) {\n    var date = dateSerialization.dateParser(text);\n    return isDate(date) ? date : void 0;\n  },\n  getMaxMonthDay: function getMaxMonthDay(year, month) {\n    return new Date(year, month + 1, 0).getDate();\n  },\n  mergeDates: function mergeDates(oldValue, newValue, format) {\n    if (!newValue) {\n      return newValue || null;\n    }\n\n    if (!oldValue || isNaN(oldValue.getTime())) {\n      var now = new Date(null);\n      oldValue = new Date(now.getFullYear(), now.getMonth(), now.getDate());\n    }\n\n    var result = new Date(oldValue.valueOf());\n    var formatInfo = dateUtils.FORMATS_INFO[format];\n    each(formatInfo.components, function () {\n      var componentInfo = dateUtils.DATE_COMPONENTS_INFO[this];\n      result[componentInfo.setter](newValue[componentInfo.getter]());\n    });\n    return result;\n  },\n  getLongestCaptionIndex: function getLongestCaptionIndex(captionArray) {\n    var longestIndex = 0;\n    var longestCaptionLength = 0;\n    var i;\n\n    for (i = 0; i < captionArray.length; ++i) {\n      if (captionArray[i].length > longestCaptionLength) {\n        longestIndex = i;\n        longestCaptionLength = captionArray[i].length;\n      }\n    }\n\n    return longestIndex;\n  },\n  formatUsesMonthName: function formatUsesMonthName(format) {\n    return dateLocalization.formatUsesMonthName(format);\n  },\n  formatUsesDayName: function formatUsesDayName(format) {\n    return dateLocalization.formatUsesDayName(format);\n  },\n  getLongestDate: function getLongestDate(format, monthNames, dayNames) {\n    var stringFormat = getStringFormat(format);\n    var month = 9;\n\n    if (!stringFormat || dateUtils.formatUsesMonthName(stringFormat)) {\n      month = dateUtils.getLongestCaptionIndex(monthNames);\n    }\n\n    var longestDate = new Date(1888, month, 21, 23, 59, 59, 999);\n\n    if (!stringFormat || dateUtils.formatUsesDayName(stringFormat)) {\n      var date = longestDate.getDate() - longestDate.getDay() + dateUtils.getLongestCaptionIndex(dayNames);\n      longestDate.setDate(date);\n    }\n\n    return longestDate;\n  },\n  normalizeTime: function normalizeTime(date) {\n    date.setSeconds(0);\n    date.setMilliseconds(0);\n  }\n};\ndateUtils.DATE_COMPONENTS_INFO = {\n  year: {\n    getter: \"getFullYear\",\n    setter: \"setFullYear\",\n    formatter: function formatter(value, date) {\n      var formatDate = new Date(date.getTime());\n      formatDate.setFullYear(value);\n      return dateLocalization.format(formatDate, \"yyyy\");\n    },\n    startValue: void 0,\n    endValue: void 0\n  },\n  day: {\n    getter: \"getDate\",\n    setter: \"setDate\",\n    formatter: function formatter(value, date) {\n      var formatDate = new Date(date.getTime());\n      formatDate.setDate(value);\n      return dateLocalization.format(formatDate, \"d\");\n    },\n    startValue: 1,\n    endValue: void 0\n  },\n  month: {\n    getter: \"getMonth\",\n    setter: \"setMonth\",\n    formatter: function formatter(value) {\n      return dateLocalization.getMonthNames()[value];\n    },\n    startValue: 0,\n    endValue: 11\n  },\n  hours: {\n    getter: \"getHours\",\n    setter: \"setHours\",\n    formatter: function formatter(value) {\n      return dateLocalization.format(new Date(0, 0, 0, value), \"hour\");\n    },\n    startValue: 0,\n    endValue: 23\n  },\n  minutes: {\n    getter: \"getMinutes\",\n    setter: \"setMinutes\",\n    formatter: function formatter(value) {\n      return dateLocalization.format(new Date(0, 0, 0, 0, value), \"minute\");\n    },\n    startValue: 0,\n    endValue: 59\n  },\n  seconds: {\n    getter: \"getSeconds\",\n    setter: \"setSeconds\",\n    formatter: function formatter(value) {\n      return dateLocalization.format(new Date(0, 0, 0, 0, 0, value), \"second\");\n    },\n    startValue: 0,\n    endValue: 59\n  },\n  milliseconds: {\n    getter: \"getMilliseconds\",\n    setter: \"setMilliseconds\",\n    formatter: function formatter(value) {\n      return dateLocalization.format(new Date(0, 0, 0, 0, 0, 0, value), \"millisecond\");\n    },\n    startValue: 0,\n    endValue: 999\n  }\n};\nexport default dateUtils;","map":null,"metadata":{},"sourceType":"module"}