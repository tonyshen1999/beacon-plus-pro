{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/text_box/ui.text_editor.base.js)\r\n * Version: 21.2.6\r\n * Build date: Tue Mar 01 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../../core/renderer\";\nimport domAdapter from \"../../core/dom_adapter\";\nimport eventsEngine from \"../../events/core/events_engine\";\nimport { focused } from \"../widget/selectors\";\nimport { isDefined } from \"../../core/utils/type\";\nimport { extend } from \"../../core/utils/extend\";\nimport { inArray } from \"../../core/utils/array\";\nimport { each } from \"../../core/utils/iterator\";\nimport { current, isMaterial } from \"../themes\";\nimport devices from \"../../core/devices\";\nimport Editor from \"../editor/editor\";\nimport { addNamespace, normalizeKeyName } from \"../../events/utils/index\";\nimport pointerEvents from \"../../events/pointer\";\nimport ClearButton from \"./ui.text_editor.clear\";\nimport TextEditorButtonCollection from \"./texteditor_button_collection/index\";\nimport config from \"../../core/config\";\nimport errors from \"../widget/ui.errors\";\nimport { Deferred } from \"../../core/utils/deferred\";\nimport LoadIndicator from \"../load_indicator\";\nimport { TextEditorLabel } from \"./ui.text_editor.label\";\nimport { getWidth } from \"../../core/utils/size\";\nimport resizeObserverSingleton from \"../../core/resize_observer\";\nvar TEXTEDITOR_CLASS = \"dx-texteditor\";\nvar TEXTEDITOR_INPUT_CONTAINER_CLASS = \"dx-texteditor-input-container\";\nvar TEXTEDITOR_INPUT_CLASS = \"dx-texteditor-input\";\nvar TEXTEDITOR_INPUT_SELECTOR = \".\" + TEXTEDITOR_INPUT_CLASS;\nvar TEXTEDITOR_CONTAINER_CLASS = \"dx-texteditor-container\";\nvar TEXTEDITOR_BUTTONS_CONTAINER_CLASS = \"dx-texteditor-buttons-container\";\nvar TEXTEDITOR_PLACEHOLDER_CLASS = \"dx-placeholder\";\nvar TEXTEDITOR_EMPTY_INPUT_CLASS = \"dx-texteditor-empty\";\nvar STATE_INVISIBLE_CLASS = \"dx-state-invisible\";\nvar TEXTEDITOR_PENDING_INDICATOR_CLASS = \"dx-pending-indicator\";\nvar TEXTEDITOR_VALIDATION_PENDING_CLASS = \"dx-validation-pending\";\nvar TEXTEDITOR_VALID_CLASS = \"dx-valid\";\nvar EVENTS_LIST = [\"KeyDown\", \"KeyPress\", \"KeyUp\", \"Change\", \"Cut\", \"Copy\", \"Paste\", \"Input\"];\nvar CONTROL_KEYS = [\"tab\", \"enter\", \"shift\", \"control\", \"alt\", \"escape\", \"pageUp\", \"pageDown\", \"end\", \"home\", \"leftArrow\", \"upArrow\", \"rightArrow\", \"downArrow\"];\nvar TextEditorLabelCreator = TextEditorLabel;\n\nfunction checkButtonsOptionType(buttons) {\n  if (isDefined(buttons) && !Array.isArray(buttons)) {\n    throw errors.Error(\"E1053\");\n  }\n}\n\nvar TextEditorBase = Editor.inherit({\n  ctor: function ctor(_, options) {\n    if (options) {\n      checkButtonsOptionType(options.buttons);\n    }\n\n    this._buttonCollection = new TextEditorButtonCollection(this, this._getDefaultButtons());\n    this._$beforeButtonsContainer = null;\n    this._$afterButtonsContainer = null;\n    this._labelContainerElement = null;\n    this.callBase.apply(this, arguments);\n  },\n  _getDefaultOptions: function _getDefaultOptions() {\n    return extend(this.callBase(), {\n      buttons: void 0,\n      value: \"\",\n      spellcheck: false,\n      showClearButton: false,\n      valueChangeEvent: \"change\",\n      placeholder: \"\",\n      inputAttr: {},\n      onFocusIn: null,\n      onFocusOut: null,\n      onKeyDown: null,\n      onKeyUp: null,\n      onChange: null,\n      onInput: null,\n      onCut: null,\n      onCopy: null,\n      onPaste: null,\n      onEnterKey: null,\n      mode: \"text\",\n      hoverStateEnabled: true,\n      focusStateEnabled: true,\n      text: void 0,\n      displayValueFormatter: function displayValueFormatter(value) {\n        return isDefined(value) && false !== value ? value : \"\";\n      },\n      stylingMode: config().editorStylingMode || \"outlined\",\n      showValidationMark: true,\n      label: \"\",\n      labelMode: \"static\",\n      labelMark: \"\"\n    });\n  },\n  _defaultOptionsRules: function _defaultOptionsRules() {\n    var themeName = current();\n    return this.callBase().concat([{\n      device: function device() {\n        return isMaterial(themeName);\n      },\n      options: {\n        stylingMode: config().editorStylingMode || \"filled\",\n        labelMode: \"floating\"\n      }\n    }]);\n  },\n  _getDefaultButtons: function _getDefaultButtons() {\n    return [{\n      name: \"clear\",\n      Ctor: ClearButton\n    }];\n  },\n  _isClearButtonVisible: function _isClearButtonVisible() {\n    return this.option(\"showClearButton\") && !this.option(\"readOnly\");\n  },\n  _input: function _input() {\n    return this.$element().find(TEXTEDITOR_INPUT_SELECTOR).first();\n  },\n  _isFocused: function _isFocused() {\n    return focused(this._input()) || this.callBase();\n  },\n  _inputWrapper: function _inputWrapper() {\n    return this.$element();\n  },\n  _buttonsContainer: function _buttonsContainer() {\n    return this._inputWrapper().find(\".\" + TEXTEDITOR_BUTTONS_CONTAINER_CLASS).eq(0);\n  },\n  _isControlKey: function _isControlKey(key) {\n    return -1 !== CONTROL_KEYS.indexOf(key);\n  },\n  _renderStylingMode: function _renderStylingMode() {\n    this.callBase();\n\n    this._updateButtonsStyling(this.option(\"stylingMode\"));\n  },\n  _initMarkup: function _initMarkup() {\n    this.$element().addClass(TEXTEDITOR_CLASS);\n\n    this._renderInput();\n\n    this._renderStylingMode();\n\n    this._renderInputType();\n\n    this._renderPlaceholder();\n\n    this._renderProps();\n\n    this.callBase();\n\n    this._renderValue();\n\n    this._renderLabel();\n  },\n  _render: function _render() {\n    this.callBase();\n\n    this._refreshValueChangeEvent();\n\n    this._renderEvents();\n\n    this._renderEnterKeyAction();\n\n    this._renderEmptinessEvent();\n  },\n  _renderInput: function _renderInput() {\n    this._$buttonsContainer = this._$textEditorContainer = $(\"<div>\").addClass(TEXTEDITOR_CONTAINER_CLASS).appendTo(this.$element());\n    this._$textEditorInputContainer = $(\"<div>\").addClass(TEXTEDITOR_INPUT_CONTAINER_CLASS).appendTo(this._$textEditorContainer);\n\n    this._$textEditorInputContainer.append(this._createInput());\n\n    this._renderButtonContainers();\n  },\n  _getInputContainer: function _getInputContainer() {\n    return this._$textEditorInputContainer;\n  },\n  _renderPendingIndicator: function _renderPendingIndicator() {\n    this.$element().addClass(TEXTEDITOR_VALIDATION_PENDING_CLASS);\n\n    var $inputContainer = this._getInputContainer();\n\n    var $indicatorElement = $(\"<div>\").addClass(TEXTEDITOR_PENDING_INDICATOR_CLASS).appendTo($inputContainer);\n    this._pendingIndicator = this._createComponent($indicatorElement, LoadIndicator);\n  },\n  _disposePendingIndicator: function _disposePendingIndicator() {\n    if (!this._pendingIndicator) {\n      return;\n    }\n\n    this._pendingIndicator.dispose();\n\n    this._pendingIndicator.$element().remove();\n\n    this._pendingIndicator = null;\n    this.$element().removeClass(TEXTEDITOR_VALIDATION_PENDING_CLASS);\n  },\n  _renderValidationState: function _renderValidationState() {\n    this.callBase();\n    var isPending = \"pending\" === this.option(\"validationStatus\");\n    var $element = this.$element();\n\n    if (isPending) {\n      !this._pendingIndicator && this._renderPendingIndicator();\n      this._showValidMark = false;\n    } else {\n      if (\"invalid\" === this.option(\"validationStatus\")) {\n        this._showValidMark = false;\n      }\n\n      if (!this._showValidMark && true === this.option(\"showValidationMark\")) {\n        this._showValidMark = \"valid\" === this.option(\"validationStatus\") && !!this._pendingIndicator;\n      }\n\n      this._disposePendingIndicator();\n    }\n\n    $element.toggleClass(TEXTEDITOR_VALID_CLASS, !!this._showValidMark);\n  },\n  _renderButtonContainers: function _renderButtonContainers() {\n    var buttons = this.option(\"buttons\");\n    this._$beforeButtonsContainer = this._buttonCollection.renderBeforeButtons(buttons, this._$buttonsContainer);\n    this._$afterButtonsContainer = this._buttonCollection.renderAfterButtons(buttons, this._$buttonsContainer);\n  },\n  _cleanButtonContainers: function _cleanButtonContainers() {\n    var _this$_$beforeButtons, _this$_$afterButtonsC;\n\n    null === (_this$_$beforeButtons = this._$beforeButtonsContainer) || void 0 === _this$_$beforeButtons ? void 0 : _this$_$beforeButtons.remove();\n    null === (_this$_$afterButtonsC = this._$afterButtonsContainer) || void 0 === _this$_$afterButtonsC ? void 0 : _this$_$afterButtonsC.remove();\n\n    this._buttonCollection.clean();\n  },\n  _clean: function _clean() {\n    this._buttonCollection.clean();\n\n    this._disposePendingIndicator();\n\n    this._unobserveLabelContainerResize();\n\n    this._$beforeButtonsContainer = null;\n    this._$afterButtonsContainer = null;\n    this._$textEditorContainer = null;\n    this._$buttonsContainer = null;\n    this.callBase();\n  },\n  _createInput: function _createInput() {\n    var $input = $(\"<input>\");\n\n    this._applyInputAttributes($input, this.option(\"inputAttr\"));\n\n    return $input;\n  },\n  _setSubmitElementName: function _setSubmitElementName(name) {\n    var inputAttrName = this.option(\"inputAttr.name\");\n    return this.callBase(name || inputAttrName || \"\");\n  },\n  _applyInputAttributes: function _applyInputAttributes($input, customAttributes) {\n    var inputAttributes = extend(this._getDefaultAttributes(), customAttributes);\n    $input.attr(inputAttributes).addClass(TEXTEDITOR_INPUT_CLASS).css(\"minHeight\", this.option(\"height\") ? \"0\" : \"\");\n  },\n  _getDefaultAttributes: function _getDefaultAttributes() {\n    var defaultAttributes = {\n      autocomplete: \"off\"\n    };\n\n    var _devices$real = devices.real(),\n        ios = _devices$real.ios,\n        mac = _devices$real.mac;\n\n    if (ios || mac) {\n      defaultAttributes.placeholder = \" \";\n    }\n\n    return defaultAttributes;\n  },\n  _updateButtons: function _updateButtons(names) {\n    this._buttonCollection.updateButtons(names);\n  },\n  _updateButtonsStyling: function _updateButtonsStyling(editorStylingMode) {\n    var _this = this;\n\n    each(this.option(\"buttons\"), function (_, _ref) {\n      var options = _ref.options,\n          buttonName = _ref.name;\n\n      if (options && !options.stylingMode && _this.option(\"visible\")) {\n        var buttonInstance = _this.getButton(buttonName);\n\n        buttonInstance.option && buttonInstance.option(\"stylingMode\", \"underlined\" === editorStylingMode ? \"text\" : \"contained\");\n      }\n    });\n  },\n  _renderValue: function _renderValue() {\n    var renderInputPromise = this._renderInputValue();\n\n    return renderInputPromise.promise();\n  },\n  _renderInputValue: function _renderInputValue(value) {\n    var _value;\n\n    value = null !== (_value = value) && void 0 !== _value ? _value : this.option(\"value\");\n    var text = this.option(\"text\");\n    var displayValue = this.option(\"displayValue\");\n    var displayValueFormatter = this.option(\"displayValueFormatter\");\n\n    if (void 0 !== displayValue && null !== value) {\n      text = displayValueFormatter(displayValue);\n    } else if (!isDefined(text)) {\n      text = displayValueFormatter(value);\n    }\n\n    this.option(\"text\", text);\n\n    if (this._input().val() !== (isDefined(text) ? text : \"\")) {\n      this._renderDisplayText(text);\n    } else {\n      this._toggleEmptinessEventHandler();\n    }\n\n    return new Deferred().resolve();\n  },\n  _renderDisplayText: function _renderDisplayText(text) {\n    this._input().val(text);\n\n    this._toggleEmptinessEventHandler();\n  },\n  _isValueValid: function _isValueValid() {\n    if (this._input().length) {\n      var validity = this._input().get(0).validity;\n\n      if (validity) {\n        return validity.valid;\n      }\n    }\n\n    return true;\n  },\n  _toggleEmptiness: function _toggleEmptiness(isEmpty) {\n    this.$element().toggleClass(TEXTEDITOR_EMPTY_INPUT_CLASS, isEmpty);\n\n    this._togglePlaceholder(isEmpty);\n  },\n  _togglePlaceholder: function _togglePlaceholder(isEmpty) {\n    this.$element().find(\".\".concat(TEXTEDITOR_PLACEHOLDER_CLASS)).eq(0).toggleClass(STATE_INVISIBLE_CLASS, !isEmpty);\n  },\n  _renderProps: function _renderProps() {\n    this._toggleReadOnlyState();\n\n    this._toggleSpellcheckState();\n\n    this._toggleTabIndex();\n  },\n  _toggleDisabledState: function _toggleDisabledState(value) {\n    this.callBase.apply(this, arguments);\n\n    var $input = this._input();\n\n    $input.prop(\"disabled\", value);\n  },\n  _toggleTabIndex: function _toggleTabIndex() {\n    var $input = this._input();\n\n    var disabled = this.option(\"disabled\");\n    var focusStateEnabled = this.option(\"focusStateEnabled\");\n\n    if (disabled || !focusStateEnabled) {\n      $input.attr(\"tabIndex\", -1);\n    } else {\n      $input.removeAttr(\"tabIndex\");\n    }\n  },\n  _toggleReadOnlyState: function _toggleReadOnlyState() {\n    this._input().prop(\"readOnly\", this._readOnlyPropValue());\n\n    this.callBase();\n  },\n  _readOnlyPropValue: function _readOnlyPropValue() {\n    return this.option(\"readOnly\");\n  },\n  _toggleSpellcheckState: function _toggleSpellcheckState() {\n    this._input().prop(\"spellcheck\", this.option(\"spellcheck\"));\n  },\n  _unobserveLabelContainerResize: function _unobserveLabelContainerResize() {\n    if (this._labelContainerElement) {\n      resizeObserverSingleton.unobserve(this._labelContainerElement);\n      this._labelContainerElement = null;\n    }\n  },\n  _getLabelContainer: function _getLabelContainer() {\n    return this._input();\n  },\n  _getLabelContainerWidth: function _getLabelContainerWidth() {\n    return getWidth(this._getLabelContainer());\n  },\n  _getLabelBeforeWidth: function _getLabelBeforeWidth() {\n    var buttonsBeforeWidth = this._$beforeButtonsContainer && getWidth(this._$beforeButtonsContainer);\n    return null !== buttonsBeforeWidth && void 0 !== buttonsBeforeWidth ? buttonsBeforeWidth : 0;\n  },\n  _updateLabelWidth: function _updateLabelWidth() {\n    this._label.updateBeforeWidth(this._getLabelBeforeWidth());\n\n    this._label.updateMaxWidth(this._getLabelContainerWidth());\n  },\n  _setLabelContainerAria: function _setLabelContainerAria() {\n    this.setAria(\"labelledby\", this._label.getId(), this._getLabelContainer());\n  },\n  _renderLabel: function _renderLabel() {\n    this._unobserveLabelContainerResize();\n\n    this._labelContainerElement = $(this._getLabelContainer()).get(0);\n\n    var _this$option = this.option(),\n        label = _this$option.label,\n        labelMode = _this$option.labelMode,\n        labelMark = _this$option.labelMark;\n\n    var labelConfig = {\n      $editor: this.$element(),\n      text: label,\n      mark: labelMark,\n      mode: labelMode,\n      containsButtonsBefore: !!this._$beforeButtonsContainer,\n      containerWidth: this._getLabelContainerWidth(),\n      beforeWidth: this._getLabelBeforeWidth()\n    };\n    this._label = new TextEditorLabelCreator(labelConfig);\n\n    this._setLabelContainerAria();\n\n    if (this._labelContainerElement) {\n      resizeObserverSingleton.observe(this._labelContainerElement, this._updateLabelWidth.bind(this));\n    }\n  },\n  _renderPlaceholder: function _renderPlaceholder() {\n    this._renderPlaceholderMarkup();\n\n    this._attachPlaceholderEvents();\n  },\n  _renderPlaceholderMarkup: function _renderPlaceholderMarkup() {\n    if (this._$placeholder) {\n      this._$placeholder.remove();\n\n      this._$placeholder = null;\n    }\n\n    var $input = this._input();\n\n    var placeholderText = this.option(\"placeholder\");\n    var $placeholder = this._$placeholder = $(\"<div>\").attr(\"data-dx_placeholder\", placeholderText);\n    $placeholder.insertAfter($input);\n    $placeholder.addClass(TEXTEDITOR_PLACEHOLDER_CLASS);\n  },\n  _attachPlaceholderEvents: function _attachPlaceholderEvents() {\n    var _this2 = this;\n\n    var startEvent = addNamespace(pointerEvents.up, this.NAME);\n    eventsEngine.on(this._$placeholder, startEvent, function () {\n      eventsEngine.trigger(_this2._input(), \"focus\");\n    });\n\n    this._toggleEmptinessEventHandler();\n  },\n  _placeholder: function _placeholder() {\n    return this._$placeholder || $();\n  },\n  _clearValueHandler: function _clearValueHandler(e) {\n    var $input = this._input();\n\n    e.stopPropagation();\n\n    this._saveValueChangeEvent(e);\n\n    this._clearValue();\n\n    !this._isFocused() && eventsEngine.trigger($input, \"focus\");\n    eventsEngine.trigger($input, \"input\");\n  },\n  _clearValue: function _clearValue() {\n    this.reset();\n  },\n  _renderEvents: function _renderEvents() {\n    var _this3 = this;\n\n    var $input = this._input();\n\n    each(EVENTS_LIST, function (_, event) {\n      if (_this3.hasActionSubscription(\"on\" + event)) {\n        var action = _this3._createActionByOption(\"on\" + event, {\n          excludeValidators: [\"readOnly\"]\n        });\n\n        eventsEngine.on($input, addNamespace(event.toLowerCase(), _this3.NAME), function (e) {\n          if (_this3._disposed) {\n            return;\n          }\n\n          action({\n            event: e\n          });\n        });\n      }\n    });\n  },\n  _refreshEvents: function _refreshEvents() {\n    var _this4 = this;\n\n    var $input = this._input();\n\n    each(EVENTS_LIST, function (_, event) {\n      eventsEngine.off($input, addNamespace(event.toLowerCase(), _this4.NAME));\n    });\n\n    this._renderEvents();\n  },\n  _keyPressHandler: function _keyPressHandler() {\n    this.option(\"text\", this._input().val());\n  },\n  _keyDownHandler: function _keyDownHandler(e) {\n    var $input = this._input();\n\n    var isCtrlEnter = e.ctrlKey && \"enter\" === normalizeKeyName(e);\n    var isNewValue = $input.val() !== this.option(\"value\");\n\n    if (isCtrlEnter && isNewValue) {\n      eventsEngine.trigger($input, \"change\");\n    }\n  },\n  _renderValueChangeEvent: function _renderValueChangeEvent() {\n    var keyPressEvent = addNamespace(this._renderValueEventName(), \"\".concat(this.NAME, \"TextChange\"));\n    var valueChangeEvent = addNamespace(this.option(\"valueChangeEvent\"), \"\".concat(this.NAME, \"ValueChange\"));\n    var keyDownEvent = addNamespace(\"keydown\", \"\".concat(this.NAME, \"TextChange\"));\n\n    var $input = this._input();\n\n    eventsEngine.on($input, keyPressEvent, this._keyPressHandler.bind(this));\n    eventsEngine.on($input, valueChangeEvent, this._valueChangeEventHandler.bind(this));\n    eventsEngine.on($input, keyDownEvent, this._keyDownHandler.bind(this));\n  },\n  _cleanValueChangeEvent: function _cleanValueChangeEvent() {\n    var valueChangeNamespace = \".\".concat(this.NAME, \"ValueChange\");\n    var textChangeNamespace = \".\".concat(this.NAME, \"TextChange\");\n    eventsEngine.off(this._input(), valueChangeNamespace);\n    eventsEngine.off(this._input(), textChangeNamespace);\n  },\n  _refreshValueChangeEvent: function _refreshValueChangeEvent() {\n    this._cleanValueChangeEvent();\n\n    this._renderValueChangeEvent();\n  },\n  _renderValueEventName: function _renderValueEventName() {\n    return \"input change keypress\";\n  },\n  _focusTarget: function _focusTarget() {\n    return this._input();\n  },\n  _focusEventTarget: function _focusEventTarget() {\n    return this.element();\n  },\n  _isInput: function _isInput(element) {\n    return element === this._input().get(0);\n  },\n  _preventNestedFocusEvent: function _preventNestedFocusEvent(event) {\n    if (event.isDefaultPrevented()) {\n      return true;\n    }\n\n    var shouldPrevent = this._isNestedTarget(event.relatedTarget);\n\n    if (\"focusin\" === event.type) {\n      shouldPrevent = shouldPrevent && this._isNestedTarget(event.target) && !this._isInput(event.target);\n    } else if (!shouldPrevent) {\n      this._toggleFocusClass(false, this.$element());\n    }\n\n    shouldPrevent && event.preventDefault();\n    return shouldPrevent;\n  },\n  _isNestedTarget: function _isNestedTarget(target) {\n    return !!this.$element().find(target).length;\n  },\n  _focusClassTarget: function _focusClassTarget() {\n    return this.$element();\n  },\n  _focusInHandler: function _focusInHandler(event) {\n    this._preventNestedFocusEvent(event);\n\n    this.callBase.apply(this, arguments);\n  },\n  _focusOutHandler: function _focusOutHandler(event) {\n    this._preventNestedFocusEvent(event);\n\n    this.callBase.apply(this, arguments);\n  },\n  _toggleFocusClass: function _toggleFocusClass(isFocused, $element) {\n    this.callBase(isFocused, this._focusClassTarget($element));\n  },\n  _hasFocusClass: function _hasFocusClass(element) {\n    return this.callBase($(element || this.$element()));\n  },\n  _renderEmptinessEvent: function _renderEmptinessEvent() {\n    var $input = this._input();\n\n    eventsEngine.on($input, \"input blur\", this._toggleEmptinessEventHandler.bind(this));\n  },\n  _toggleEmptinessEventHandler: function _toggleEmptinessEventHandler() {\n    var text = this._input().val();\n\n    var isEmpty = (\"\" === text || null === text) && this._isValueValid();\n\n    this._toggleEmptiness(isEmpty);\n  },\n  _valueChangeEventHandler: function _valueChangeEventHandler(e, formattedValue) {\n    if (this.option(\"readOnly\")) {\n      return;\n    }\n\n    this._saveValueChangeEvent(e);\n\n    this.option(\"value\", arguments.length > 1 ? formattedValue : this._input().val());\n\n    this._saveValueChangeEvent(void 0);\n  },\n  _renderEnterKeyAction: function _renderEnterKeyAction() {\n    this._enterKeyAction = this._createActionByOption(\"onEnterKey\", {\n      excludeValidators: [\"readOnly\"]\n    });\n    eventsEngine.off(this._input(), \"keyup.onEnterKey.dxTextEditor\");\n    eventsEngine.on(this._input(), \"keyup.onEnterKey.dxTextEditor\", this._enterKeyHandlerUp.bind(this));\n  },\n  _enterKeyHandlerUp: function _enterKeyHandlerUp(e) {\n    if (this._disposed) {\n      return;\n    }\n\n    if (\"enter\" === normalizeKeyName(e)) {\n      this._enterKeyAction({\n        event: e\n      });\n    }\n  },\n  _updateValue: function _updateValue() {\n    this._options.silent(\"text\", null);\n\n    this._renderValue();\n  },\n  _dispose: function _dispose() {\n    this._enterKeyAction = void 0;\n    this.callBase();\n  },\n  _getSubmitElement: function _getSubmitElement() {\n    return this._input();\n  },\n  _hasActiveElement: function _hasActiveElement() {\n    return this._input().is(domAdapter.getActiveElement());\n  },\n  _optionChanged: function _optionChanged(args) {\n    var name = args.name,\n        fullName = args.fullName,\n        value = args.value;\n\n    if (inArray(name.replace(\"on\", \"\"), EVENTS_LIST) > -1) {\n      this._refreshEvents();\n\n      return;\n    }\n\n    switch (name) {\n      case \"valueChangeEvent\":\n        this._refreshValueChangeEvent();\n\n        this._refreshFocusEvent();\n\n        this._refreshEvents();\n\n        break;\n\n      case \"onValueChanged\":\n        this._createValueChangeAction();\n\n        break;\n\n      case \"focusStateEnabled\":\n        this.callBase(args);\n\n        this._toggleTabIndex();\n\n        break;\n\n      case \"spellcheck\":\n        this._toggleSpellcheckState();\n\n        break;\n\n      case \"mode\":\n        this._renderInputType();\n\n        break;\n\n      case \"onEnterKey\":\n        this._renderEnterKeyAction();\n\n        break;\n\n      case \"placeholder\":\n        this._renderPlaceholder();\n\n        break;\n\n      case \"label\":\n        this._label.updateText(value);\n\n        this._setLabelContainerAria();\n\n        break;\n\n      case \"labelMark\":\n        this._label.updateMark(value);\n\n        break;\n\n      case \"labelMode\":\n        this._label.updateMode(value);\n\n        this._setLabelContainerAria();\n\n        break;\n\n      case \"width\":\n        this.callBase(args);\n\n        this._label.updateMaxWidth(this._getLabelContainerWidth());\n\n        break;\n\n      case \"readOnly\":\n      case \"disabled\":\n        this._updateButtons();\n\n        this.callBase(args);\n        break;\n\n      case \"showClearButton\":\n        this._updateButtons([\"clear\"]);\n\n        break;\n\n      case \"text\":\n        break;\n\n      case \"value\":\n        this._updateValue();\n\n        this.callBase(args);\n        break;\n\n      case \"inputAttr\":\n        this._applyInputAttributes(this._input(), this.option(name));\n\n        break;\n\n      case \"stylingMode\":\n        this._renderStylingMode();\n\n        this._updateLabelWidth();\n\n        break;\n\n      case \"buttons\":\n        if (fullName === name) {\n          checkButtonsOptionType(value);\n        }\n\n        this._cleanButtonContainers();\n\n        this._renderButtonContainers();\n\n        this._updateButtonsStyling(this.option(\"stylingMode\"));\n\n        this._updateLabelWidth();\n\n        this._label.updateContainsButtonsBefore(!!this._$beforeButtonsContainer);\n\n        break;\n\n      case \"visible\":\n        this.callBase(args);\n\n        if (value && this.option(\"buttons\")) {\n          this._cleanButtonContainers();\n\n          this._renderButtonContainers();\n\n          this._updateButtonsStyling(this.option(\"stylingMode\"));\n        }\n\n        break;\n\n      case \"displayValueFormatter\":\n        this._invalidate();\n\n        break;\n\n      case \"showValidationMark\":\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _renderInputType: function _renderInputType() {\n    this._setInputType(this.option(\"mode\"));\n  },\n  _setInputType: function _setInputType(type) {\n    var input = this._input();\n\n    if (\"search\" === type) {\n      type = \"text\";\n    }\n\n    try {\n      input.prop(\"type\", type);\n    } catch (e) {\n      input.prop(\"type\", \"text\");\n    }\n  },\n  getButton: function getButton(name) {\n    return this._buttonCollection.getButton(name);\n  },\n  focus: function focus() {\n    eventsEngine.trigger(this._input(), \"focus\");\n  },\n  reset: function reset() {\n    if (this._showValidMark) {\n      this._showValidMark = false;\n\n      this._renderValidationState();\n    }\n\n    var defaultOptions = this._getDefaultOptions();\n\n    if (this.option(\"value\") === defaultOptions.value) {\n      this._options.silent(\"text\", \"\");\n\n      this._renderValue();\n    } else {\n      this.option(\"value\", defaultOptions.value);\n    }\n  },\n  on: function on(eventName, eventHandler) {\n    var result = this.callBase(eventName, eventHandler);\n    var event = eventName.charAt(0).toUpperCase() + eventName.substr(1);\n\n    if (EVENTS_LIST.indexOf(event) >= 0) {\n      this._refreshEvents();\n    }\n\n    return result;\n  }\n});\nexport default TextEditorBase;","map":null,"metadata":{},"sourceType":"module"}