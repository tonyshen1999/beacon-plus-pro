{"ast":null,"code":"/**\r\n * DevExtreme (esm/renovation/ui/scheduler/utils/data.js)\r\n * Version: 21.2.6\r\n * Build date: Tue Mar 01 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { replaceWrongEndDate } from \"../../../../ui/scheduler/appointments/dataProvider/utils\";\nimport { createAppointmentAdapter } from \"../../../../ui/scheduler/appointmentAdapter\";\nimport { isDefined } from \"../../../../core/utils/type\";\nvar RECURRENCE_FREQ = \"freq\";\nexport var getPreparedDataItems = function getPreparedDataItems(dataItems, dataAccessors, cellDurationInMinutes, timeZoneCalculator) {\n  var result = [];\n  null === dataItems || void 0 === dataItems ? void 0 : dataItems.forEach(function (rawAppointment) {\n    var _recurrenceRule$match;\n\n    var startDate = new Date(dataAccessors.getter.startDate(rawAppointment));\n    var endDate = new Date(dataAccessors.getter.endDate(rawAppointment));\n    replaceWrongEndDate(rawAppointment, startDate, endDate, cellDurationInMinutes, dataAccessors);\n    var adapter = createAppointmentAdapter(rawAppointment, dataAccessors, timeZoneCalculator);\n    var comparableStartDate = adapter.startDate && adapter.calculateStartDate(\"toGrid\");\n    var comparableEndDate = adapter.endDate && adapter.calculateEndDate(\"toGrid\");\n    var regex = new RegExp(RECURRENCE_FREQ, \"gi\");\n    var recurrenceRule = adapter.recurrenceRule;\n    var hasRecurrenceRule = !!(null !== recurrenceRule && void 0 !== recurrenceRule && null !== (_recurrenceRule$match = recurrenceRule.match(regex)) && void 0 !== _recurrenceRule$match && _recurrenceRule$match.length);\n    var visible = isDefined(rawAppointment.visible) ? !!rawAppointment.visible : true;\n\n    if (comparableStartDate && comparableEndDate) {\n      result.push({\n        allDay: !!adapter.allDay,\n        startDate: comparableStartDate,\n        endDate: comparableEndDate,\n        recurrenceRule: adapter.recurrenceRule,\n        recurrenceException: adapter.recurrenceException,\n        hasRecurrenceRule: hasRecurrenceRule,\n        visible: visible,\n        rawAppointment: rawAppointment\n      });\n    }\n  });\n  return result;\n};\nexport var resolveDataItems = function resolveDataItems(options) {\n  return Array.isArray(options) ? options : options.data;\n};","map":null,"metadata":{},"sourceType":"module"}